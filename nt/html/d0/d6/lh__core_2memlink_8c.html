<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>test: lh_core/memlink.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="../../main.html">Main&nbsp;Page</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Class&nbsp;List</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Class&nbsp;Members</a> | <a class="qindex" href="../../globals.html">File&nbsp;Members</a></div>
<h1>memlink.c File Reference</h1><code>#include "General.h"</code><br>
<code>#include "MemLink.h"</code><br>
<code>#include &lt;time.h&gt;</code><br>

<p>
<a href="../../d1/d5/lh__core_2memlink_8c-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a0">CMHelperICC2int16Const</a>(a, b)&nbsp;&nbsp;&nbsp;(*((<a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a7">UINT16</a> *)(a))) = (<a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a7">UINT16</a>)(b);</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(a, b)&nbsp;&nbsp;&nbsp;(*((<a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a> *)(a))) = (<a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a>)(b);</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a2">Round</a>(a)&nbsp;&nbsp;&nbsp;(((a)&gt;0.)?((a)+.5):((a)-.5))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a3">MyTagCount</a>&nbsp;&nbsp;&nbsp;9</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a4">MyTagCountLink</a>&nbsp;&nbsp;&nbsp;5</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a5">LINK_BUFFER_MAX</a>&nbsp;&nbsp;&nbsp;3000</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a6">MyAdd_NL_Header</a> (<a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a> theSize, <a class="el" href="../../d1/d2/structicHeader.html">icHeader</a> *linkHeader, <a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a> aIntent, <a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a> aClass, <a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a> aColorSpace, <a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a> aConnectionSpace)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a7">MyAdd_NL_HeaderMS</a> (<a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a> theSize, <a class="el" href="../../d1/d2/structicHeader.html">icHeader</a> *linkHeader, unsigned long aIntent, <a class="el" href="../../d5/d7/mscmm_8w98_2lh__core_2profile_8h.html#a186">icColorSpaceSignature</a> sCS, <a class="el" href="../../d5/d7/mscmm_8w98_2lh__core_2profile_8h.html#a186">icColorSpaceSignature</a> dCS)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a8">MyAdd_NL_DescriptionTag</a> (<a class="el" href="../../d6/d8/structLHTextDescriptionType.html">LHTextDescriptionType</a> *descPtr, unsigned char *theText)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a9">MyAdd_NL_ColorantTag</a> (<a class="el" href="../../d9/d6/structicXYZType.html">icXYZType</a> *descPtr, <a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *aColor)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a10">MyAdd_NL_CurveTag</a> (<a class="el" href="../../d5/d1/structicCurveType.html">icCurveType</a> *descPtr, unsigned short Gamma)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a11">MyAdd_NL_CopyrightTag</a> (unsigned char *copyrightText, <a class="el" href="../../d7/d8/structLHTextType.html">LHTextType</a> *aLHTextType)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a12">Fill_mft1_InputTable</a> (<a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a28">Ptr</a> theElut, <a class="el" href="../../d8/d2/structicLut8.html">icLut8</a> *lutPtr, <a class="el" href="../../d4/d7/w98_2lh__core_2typedefs_8h.html#a13">CMMModelPtr</a> modelData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a13">Fill_mft1_OutputTable</a> (<a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a28">Ptr</a> theAlut, <a class="el" href="../../d8/d2/structicLut8.html">icLut8</a> *lutPtr, long offset, <a class="el" href="../../d4/d7/w98_2lh__core_2typedefs_8h.html#a13">CMMModelPtr</a> modelData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a14">Fill_mft2_InputTable</a> (<a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a28">Ptr</a> theElut, <a class="el" href="../../d6/d2/structicLut16.html">icLut16</a> *lutPtr, <a class="el" href="../../d4/d7/w98_2lh__core_2typedefs_8h.html#a13">CMMModelPtr</a> modelData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a15">Fill_mft2_OutputTable</a> (<a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a28">Ptr</a> theAlut, <a class="el" href="../../d6/d2/structicLut16.html">icLut16</a> *lutPtr, long offset, <a class="el" href="../../d4/d7/w98_2lh__core_2typedefs_8h.html#a13">CMMModelPtr</a> modelData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a16">Fill_mft2_ColorTable</a> (<a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a28">Ptr</a> theClut, <a class="el" href="../../d6/d2/structicLut16.html">icLut16</a> *lutPtr, long offset, long count)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a17">MyAdd_NL_AToB0Tag_mft1</a> (<a class="el" href="../../d4/d7/w98_2lh__core_2typedefs_8h.html#a13">CMMModelPtr</a> cw, <a class="el" href="../../d9/d2/structicLut8Type.html">icLut8Type</a> *lutPtr, long colorLutSize)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a18">GetSizes</a> (<a class="el" href="../../d4/d7/w98_2lh__core_2typedefs_8h.html#a13">CMMModelPtr</a> cw, <a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a> *clutSize)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a19">MyAdd_NL_AToB0Tag_mft2</a> (<a class="el" href="../../d4/d7/w98_2lh__core_2typedefs_8h.html#a13">CMMModelPtr</a> cw, <a class="el" href="../../d7/d2/structicLut16Type.html">icLut16Type</a> *lutPtr, long colorLutSize)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a20">MyGetColorSpaces</a> (<a class="el" href="../../d9/d3/structCMConcatProfileSet.html">CMConcatProfileSet</a> *profileSet, <a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a> *sCS, <a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a> *dCS)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a21">MyAdd_NL_SequenceDescTag</a> (<a class="el" href="../../d9/d3/structCMConcatProfileSet.html">CMConcatProfileSet</a> *profileSet, <a class="el" href="../../d8/d3/structicProfileSequenceDescType.html">icProfileSequenceDescType</a> *pSeqPtr, long *aSize)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a22">MakeXYZNumber</a> (<a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *x)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a23">MakeMyDoubleXYZ</a> (<a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *x, <a class="el" href="../../d5/d1/structMyDoubleXYZ.html">MyDoubleXYZ</a> *ret)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a21">Boolean</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a24">doubMatrixInvert</a> (double inpMat[3][3], double outMat[3][3])</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a25">TransposeMatrix</a> (double inpMat[3][3])</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>double&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a26">GetMatrixedVal</a> (double m[3][3], long color, <a class="el" href="../../d5/d1/structMyDoubleXYZ.html">MyDoubleXYZ</a> *aXYZ)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a27">NormalizeColor</a> (<a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *r, <a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *g, <a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *b, <a class="el" href="../../d5/d1/structMyDoubleXYZ.html">MyDoubleXYZ</a> *Illuminant, <a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *resR, <a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *resG, <a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *resB)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a28">NormalizeWithWhiteAdaption</a> (<a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *r, <a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *g, <a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *b, <a class="el" href="../../d5/d1/structMyDoubleXYZ.html">MyDoubleXYZ</a> *Illuminant, <a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *resR, <a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *resG, <a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *resB)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="../../d0/d6/lh__core_2memlink_8c.html#a29">DeviceLinkFill</a> (<a class="el" href="../../d4/d7/w98_2lh__core_2typedefs_8h.html#a13">CMMModelPtr</a> cw, <a class="el" href="../../d9/d3/structCMConcatProfileSet.html">CMConcatProfileSet</a> *profileSet, <a class="el" href="../../d6/d3/structicProfile.html">icProfile</a> **theProf, unsigned long aIntent)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="lh_core/memlink.c::CMHelperICC2int16Const" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CMHelperICC2int16Const          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">a,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>b&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(*((<a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a7">UINT16</a> *)(a))) = (<a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a7">UINT16</a>)(b);</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00041">41</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
Referenced by <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00502">Fill_mft2_ColorTable()</a>, <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00389">Fill_mft2_InputTable()</a>, <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00455">Fill_mft2_OutputTable()</a>, and <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00619">MyAdd_NL_AToB0Tag_mft2()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="lh_core/memlink.c::CMHelperICC2int32Const" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CMHelperICC2int32Const          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">a,         <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>b&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(*((<a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a> *)(a))) = (<a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a>)(b);</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00043">43</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
Referenced by <a class="el" href="../../d9/d4/mscmm_2membaspr_8c-source.html#l00040">DeviceLinkFill()</a>, <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00521">MyAdd_NL_AToB0Tag_mft1()</a>, <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00619">MyAdd_NL_AToB0Tag_mft2()</a>, <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00222">MyAdd_NL_ColorantTag()</a>, <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00245">MyAdd_NL_CopyrightTag()</a>, <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00234">MyAdd_NL_CurveTag()</a>, <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00178">MyAdd_NL_DescriptionTag()</a>, <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00053">MyAdd_NL_Header()</a>, and <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00724">MyAdd_NL_SequenceDescTag()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="lh_core/memlink.c::LINK_BUFFER_MAX" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define LINK_BUFFER_MAX&nbsp;&nbsp;&nbsp;3000          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l01279">1279</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
Referenced by <a class="el" href="../../d9/d4/mscmm_2membaspr_8c-source.html#l00040">DeviceLinkFill()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="lh_core/memlink.c::MyTagCount" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MyTagCount&nbsp;&nbsp;&nbsp;9          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00941">941</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
Referenced by <a class="el" href="../../d9/d4/mscmm_2membaspr_8c-source.html#l00040">DeviceLinkFill()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="lh_core/memlink.c::MyTagCountLink" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define MyTagCountLink&nbsp;&nbsp;&nbsp;5          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l01278">1278</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
Referenced by <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l01281">DeviceLinkFill()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="lh_core/memlink.c::Round" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define Round          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">a&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(((a)&gt;0.)?((a)+.5):((a)-.5))</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00863">863</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a29" doxytag="lh_core/memlink.c::DeviceLinkFill" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a> DeviceLinkFill           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d7/w98_2lh__core_2typedefs_8h.html#a13">CMMModelPtr</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cw</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d3/structCMConcatProfileSet.html">CMConcatProfileSet</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>profileSet</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d3/structicProfile.html">icProfile</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>theProf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>unsigned long&nbsp;</td>
          <td class="mdname" nowrap> <em>aIntent</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l01281">1281</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
<pre class="fragment"><div>01285 {
01286         <a class="code" href="../../d2/d6/lh__open_2pi__app_8h.html#a11">CMError</a>                 err = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a56">unimpErr</a>;
01287         <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a35">OSErr</a>                   aOSerr = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a56">unimpErr</a>;
01288 <span class="preprocessor">#ifdef __MWERKS__</span>
01289 <span class="preprocessor"></span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   theText[] = <span class="stringliteral">"\pDeviceLink profile  "</span>;
01290         <span class="keywordtype">char</span>                    copyrightText[] = <span class="stringliteral">"\p©1996 by Heidelberger Druckmaschinen AG  U.J.K."</span>;
01291 <span class="preprocessor">#elif __IS_MSDOS</span>
01292 <span class="preprocessor"></span>        <span class="keywordtype">char</span>                    theText[] = <span class="stringliteral">"\030DeviceLink profile     "</span>;
01293         <span class="keywordtype">char</span>                    copyrightText[] = <span class="stringliteral">"\060©1996 by Heidelberger Druckmaschinen AG  U.J.K."</span>;
01294 <span class="preprocessor">#else</span>
01295 <span class="preprocessor"></span>        <span class="keywordtype">char</span>                    theText[] = <span class="stringliteral">"\030DeviceLink profile     "</span>;
01296         <span class="keywordtype">char</span>                    copyrightText[] = <span class="stringliteral">"\060©1996 by Heidelberger Druckmaschinen AG  U.J.K."</span>;
01297 <span class="preprocessor">#endif</span>
01298 <span class="preprocessor"></span>        <a class="code" href="../../d6/d3/structicProfile.html">icProfile</a>               *aProf=0;
01299         <span class="keywordtype">long</span>                    theTagTabSize;
01300         <span class="keywordtype">long</span>                    theHeaderSize;
01301         <span class="keywordtype">long</span>                    theDescSize;
01302         <span class="keywordtype">long</span>                    theMediaSize;
01303         <span class="keywordtype">long</span>                    theSequenceDescSize;
01304         <span class="keywordtype">long</span>                    theA2B0Size;
01305         <span class="keywordtype">long</span>                    theCopyRightSize;
01306         <span class="keywordtype">long</span>                    currentSize=0;
01307         <span class="keywordtype">long</span>                    theTotalSize=0;
01308         <a class="code" href="../../d5/d4/structicTag.html">icTag</a>                   aTag;
01309         <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a8">UINT32</a>                  sCS,dCS,clutSize;
01310         <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a28">Ptr</a>                             aPtr=0;
01311 
01312         <a class="code" href="../../d5/d1/structMyDoubleXYZ.html">MyDoubleXYZ</a> D50XYZ = { 0.9642, 1.0000, 0.8249 };
01313         <a class="code" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> D50 = { (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)(0.9642 * 65536), (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)(1.0000 * 65536), (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)(0.8249 * 65536)};
01314         theHeaderSize = <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d2/structicHeader.html">icHeader</a>);
01315         theDescSize   =                                                                           <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a34">OSType</a>)                        <span class="comment">/* type descriptor */</span>
01316                                                                                                                 + <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)         <span class="comment">/* reserved */</span>
01317                                                                                                                 + <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)         <span class="comment">/* ASCII length */</span>
01318                                                                                                                 + theText[0]                            <span class="comment">/* ASCII profile description */</span>
01319                                                                                                                 + <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)         <span class="comment">/* Unicode code */</span>
01320                                                                                                                 + <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)         <span class="comment">/* Unicode character count */</span>
01321                                                                                                                 + <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>)        <span class="comment">/* Macintosh script code */</span>
01322                                                                                                                 + <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)         <span class="comment">/* Macintosh string length */</span>
01323                                                                                                                 + 67                                            <span class="comment">/* Macintosh string */</span>
01324                                                                                                                 ;
01325         theCopyRightSize   =                                                              <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a34">OSType</a>)                        <span class="comment">/* type descriptor */</span>
01326                                                                                                                 + <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)         <span class="comment">/* reserved */</span>
01327                                                                                                                 + copyrightText[0]                      <span class="comment">/* ASCII profile description */</span>
01328                                                                                                                 ;
01329         theMediaSize = <span class="keyword">sizeof</span>( <a class="code" href="../../d9/d6/structicXYZType.html">icXYZType</a> );;
01330 
01331         theTagTabSize = <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a4">MyTagCountLink</a> * <span class="keyword">sizeof</span>( <a class="code" href="../../d5/d4/structicTag.html">icTag</a> ) + <span class="keyword">sizeof</span>( <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> );
01332         
01333         *theProf = 0;
01334         
01335         <span class="keywordflow">if</span>( cw-&gt;hasNamedColorProf != <a class="code" href="../../d3/d7/lh__core_2typedefs_8h.html#a20a16">NoNamedColorProfile</a> ){
01336                 err = <a class="code" href="../../d2/d6/lh__open_2pi__app_8h.html#a149a31">cmProfileError</a>;
01337                 <span class="keywordflow">goto</span> CleanupAndExit;
01338         }
01339         err = <a class="code" href="../../d3/d6/w98_2lh__core_2memlink_8h.html#a4">MyGetColorSpaces</a>( profileSet, &amp;sCS, &amp;dCS );
01340         <span class="keywordflow">if</span> (err)
01341                 <span class="keywordflow">goto</span> CleanupAndExit;
01342                 
01343         aProf = (<a class="code" href="../../d6/d3/structicProfile.html">icProfile</a> *)<a class="code" href="../../d9/d7/w98_2lh__open_2pi__mem_8h.html#a6">SmartNewPtrClear</a>( LINK_BUFFER_MAX, &amp;aOSerr );
01344         err = aOSerr;
01345         <span class="keywordflow">if</span> (err)
01346                 <span class="keywordflow">goto</span> CleanupAndExit;
01347 
01348         err = <a class="code" href="../../d3/d6/w98_2lh__core_2memlink_8h.html#a6">MyAdd_NL_Header</a>(theTotalSize, (<a class="code" href="../../d1/d2/structicHeader.html">icHeader</a>*)((Ptr)aProf+currentSize), aIntent, icSigLinkClass, sCS, dCS );
01349         <span class="keywordflow">if</span> (err)
01350                 <span class="keywordflow">goto</span> CleanupAndExit;
01351                 
01352         <span class="comment">/*----------------------------------------------------------------------------------------- cmProfileDescriptionTag */</span>
01353         currentSize = theHeaderSize + theTagTabSize;
01354         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(aProf-&gt;<a class="code" href="../../d6/d3/structicProfile.html#o3">tagList</a>.<a class="code" href="../../d7/d4/structicTagList.html#o0">count</a> ), MyTagCountLink);
01355 
01356         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(aTag.<a class="code" href="../../d5/d4/structicTag.html#o0">sig</a> ), icSigProfileDescriptionTag);
01357         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(aTag.<a class="code" href="../../d5/d4/structicTag.html#o1">offset</a> ), currentSize);
01358         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(aTag.<a class="code" href="../../d5/d4/structicTag.html#o2">size</a> ), theDescSize);
01359         aProf-&gt;<a class="code" href="../../d6/d3/structicProfile.html#o3">tagList</a>.<a class="code" href="../../d7/d4/structicTagList.html#o1">tags</a>[0] = aTag;
01360         err =<a class="code" href="../../d3/d6/w98_2lh__core_2memlink_8h.html#a7">MyAdd_NL_DescriptionTag</a>    ( (<a class="code" href="../../d6/d8/structLHTextDescriptionType.html">LHTextDescriptionType</a> *)((Ptr)aProf+currentSize), (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)theText );
01361         <span class="keywordflow">if</span> (err)
01362                 <span class="keywordflow">goto</span> CleanupAndExit;
01363         currentSize += theDescSize;
01364         currentSize = ( currentSize + 3 ) &amp; ~ 3;
01365 
01366         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(aTag.<a class="code" href="../../d5/d4/structicTag.html#o0">sig</a> ), icSigMediaWhitePointTag);
01367         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(aTag.<a class="code" href="../../d5/d4/structicTag.html#o1">offset</a> ), currentSize );
01368         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(aTag.<a class="code" href="../../d5/d4/structicTag.html#o2">size</a> ), theMediaSize);
01369         aProf-&gt;<a class="code" href="../../d6/d3/structicProfile.html#o3">tagList</a>.<a class="code" href="../../d7/d4/structicTagList.html#o1">tags</a>[1] = aTag;
01370         <a class="code" href="../../d3/d6/w98_2lh__core_2memlink_8h.html#a8">MyAdd_NL_ColorantTag</a>((<a class="code" href="../../d9/d6/structicXYZType.html">icXYZType</a> *)((Ptr)aProf+currentSize), &amp;D50);
01371         currentSize += theMediaSize;
01372         currentSize = ( currentSize + 3 ) &amp; ~ 3;
01373 
01374         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(aTag.<a class="code" href="../../d5/d4/structicTag.html#o0">sig</a> ), icSigCopyrightTag);
01375         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(aTag.<a class="code" href="../../d5/d4/structicTag.html#o1">offset</a> ), currentSize );
01376         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(aTag.<a class="code" href="../../d5/d4/structicTag.html#o2">size</a> ), theCopyRightSize);
01377         aProf-&gt;<a class="code" href="../../d6/d3/structicProfile.html#o3">tagList</a>.<a class="code" href="../../d7/d4/structicTagList.html#o1">tags</a>[2] = aTag;
01378         err = <a class="code" href="../../d3/d6/w98_2lh__core_2memlink_8h.html#a10">MyAdd_NL_CopyrightTag</a>( (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)copyrightText, (<a class="code" href="../../d7/d8/structLHTextType.html">LHTextType</a> *)((Ptr)aProf+currentSize));
01379         <span class="keywordflow">if</span> (err)
01380                 <span class="keywordflow">goto</span> CleanupAndExit;
01381         currentSize += theCopyRightSize;
01382         currentSize = ( currentSize + 3 ) &amp; ~ 3;
01383                 
01384         err = <a class="code" href="../../d3/d6/w98_2lh__core_2memlink_8h.html#a11">MyAdd_NL_SequenceDescTag</a>( profileSet, (<a class="code" href="../../d8/d3/structicProfileSequenceDescType.html">icProfileSequenceDescType</a> *)((Ptr)aProf+currentSize), &amp;theSequenceDescSize );
01385         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(aTag.<a class="code" href="../../d5/d4/structicTag.html#o0">sig</a> ), icSigProfileSequenceDescTag);
01386         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(aTag.<a class="code" href="../../d5/d4/structicTag.html#o1">offset</a> ), currentSize );
01387         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(aTag.<a class="code" href="../../d5/d4/structicTag.html#o2">size</a> ), theSequenceDescSize);
01388         aProf-&gt;<a class="code" href="../../d6/d3/structicProfile.html#o3">tagList</a>.<a class="code" href="../../d7/d4/structicTagList.html#o1">tags</a>[3] = aTag;
01389         currentSize += theSequenceDescSize;
01390         currentSize = ( currentSize + 3 ) &amp; ~ 3;
01391 
01392     theA2B0Size = <a class="code" href="../../d0/d7/w98_2mscmm_2memprof_8h.html#a7">GetSizes</a>( (CMMModelPtr)cw, &amp;clutSize );
01393 
01394         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(aTag.<a class="code" href="../../d5/d4/structicTag.html#o0">sig</a> ), icSigAToB0Tag);
01395         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(aTag.<a class="code" href="../../d5/d4/structicTag.html#o1">offset</a> ), currentSize );
01396         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(aTag.<a class="code" href="../../d5/d4/structicTag.html#o2">size</a> ), theA2B0Size);
01397         aProf-&gt;<a class="code" href="../../d6/d3/structicProfile.html#o3">tagList</a>.<a class="code" href="../../d7/d4/structicTagList.html#o1">tags</a>[4] = aTag;
01398 
01399 <span class="preprocessor">#if __IS_MSDOS</span>
01400 <span class="preprocessor"></span>        aPtr = GlobalAllocPtr( GHND, theA2B0Size+currentSize );
01401         <span class="keywordflow">if</span>( aPtr == 0 ){
01402                 err = GetLastError();
01403                 <span class="keywordflow">goto</span> CleanupAndExit;
01404         }
01405 <span class="preprocessor">#else   </span>
01406 <span class="preprocessor"></span>        aPtr =  <a class="code" href="../../d9/d7/w98_2lh__open_2pi__mem_8h.html#a5">SmartNewPtr</a>( theA2B0Size+currentSize, &amp;aOSerr );
01407         err = aOSerr;
01408         <span class="keywordflow">if</span>( err ){
01409                 <span class="keywordflow">goto</span> CleanupAndExit;
01410         }
01411 <span class="preprocessor">#endif</span>
01412 <span class="preprocessor"></span>
01413 
01414         <span class="keywordflow">if</span> ( cw-&gt;lutParam.colorLutWordSize == 8 )
01415         err = <a class="code" href="../../d3/d6/w98_2lh__core_2memlink_8h.html#a12">MyAdd_NL_AToB0Tag_mft1</a>( (CMMModelPtr)cw, (<a class="code" href="../../d9/d2/structicLut8Type.html">icLut8Type</a> *)(aPtr+currentSize), clutSize );
01416     <span class="keywordflow">else</span>
01417         err = <a class="code" href="../../d3/d6/w98_2lh__core_2memlink_8h.html#a13">MyAdd_NL_AToB0Tag_mft2</a>( (CMMModelPtr)cw, (<a class="code" href="../../d7/d2/structicLut16Type.html">icLut16Type</a> *)(aPtr+currentSize), clutSize );
01418 
01419         <span class="keywordflow">if</span> (err)
01420                 <span class="keywordflow">goto</span> CleanupAndExit;
01421 
01422         <a class="code" href="../../d9/d7/w98_2lh__open_2pi__mem_8h.html#a10">BlockMove</a>( (Ptr)aProf, aPtr, currentSize );
01423         aProf = (<a class="code" href="../../d6/d3/structicProfile.html">icProfile</a> *)<a class="code" href="../../d9/d7/w98_2lh__open_2pi__mem_8h.html#a4">DisposeIfPtr</a>( (Ptr)aProf );
01424 
01425         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>( aPtr, theA2B0Size+currentSize );
01426 
01427         *theProf = (<a class="code" href="../../d6/d3/structicProfile.html">icProfile</a> *)aPtr;
01428 <span class="preprocessor">#ifdef WRITE_PROFILE</span>
01429 <span class="preprocessor"></span>        <a class="code" href="../../d9/d6/w98_2mscmm_2icm32_8c.html#a26">WriteProf</a>( <span class="stringliteral">"DeviceLinkFill.pf"</span>, (<a class="code" href="../../d6/d3/structicProfile.html">icProfile</a> *)aPtr, theA2B0Size+currentSize );
01430 <span class="preprocessor">#endif</span>
01431 <span class="preprocessor"></span>        <span class="keywordflow">return</span> <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>;
01432         
01433 CleanupAndExit:
01434         *theProf = (<a class="code" href="../../d6/d3/structicProfile.html">icProfile</a> *)<a class="code" href="../../d9/d7/w98_2lh__open_2pi__mem_8h.html#a4">DisposeIfPtr</a>( (Ptr)aProf );
01435 <span class="preprocessor">#if __IS_MSDOS</span>
01436 <span class="preprocessor"></span>        <span class="keywordflow">if</span>( aPtr )GlobalFreePtr( aPtr );
01437 <span class="preprocessor">#else</span>
01438 <span class="preprocessor"></span>        aPtr = <a class="code" href="../../d9/d7/w98_2lh__open_2pi__mem_8h.html#a4">DisposeIfPtr</a>( (Ptr)aPtr );
01439 <span class="preprocessor">#endif</span>
01440 <span class="preprocessor"></span>        <span class="keywordflow">return</span> err;
01441 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="lh_core/memlink.c::doubMatrixInvert" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a21">Boolean</a> doubMatrixInvert           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">double&nbsp;</td>
          <td class="mdname" nowrap> <em>inpMat</em>[3][3], </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>double&nbsp;</td>
          <td class="mdname" nowrap> <em>outMat</em>[3][3]</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d0/d6/lh__core_2fragment_8c-source.html#l00389">389</a> of file <a class="el" href="../../d0/d6/lh__core_2fragment_8c-source.html">lh_core/fragment.c</a>.
<p>
<pre class="fragment"><div>00390 {
00391         <span class="keywordtype">double</span>  detm, hilf1, hilf2, hilf3, hilf4, hilf5, hilf6;
00392         <span class="keywordtype">double</span>  *a;
00393         <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a21">Boolean</a> success = <a class="code" href="../../d6/d7/halmips_8h.html#a458">TRUE</a>;
00394 <span class="preprocessor">#ifdef DEBUG_OUTPUT</span>
00395 <span class="preprocessor"></span>        <a class="code" href="../../d2/d6/lh__open_2pi__app_8h.html#a11">CMError</a> err=<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>;
00396 <span class="preprocessor">#endif</span>
00397 <span class="preprocessor"></span>        <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a1">LH_START_PROC</a>(<span class="stringliteral">"doubMatrixInvert"</span>)
00398         a = (<span class="keywordtype">double</span> *)MatHin;
00399         
00400         hilf1 = a[0] * a[4];
00401         hilf2 = a[1] * a[5];
00402         hilf3 = a[2] * a[3];
00403         hilf4 = a[2] * a[4];
00404         hilf5 = a[1] * a[3];
00405         hilf6 = a[0] * a[5];
00406         
00407         detm = hilf1 * a[8] + hilf2 * a[6]
00408                  + hilf3 * a[7] - hilf4 * a[6]
00409                  - hilf5 * a[8] - hilf6 * a[7];
00410         
00411         <span class="comment">/*      if(fabs(detm) &lt; 1.E-9) */</span>
00412         if ( (detm &lt; 1.E-9) &amp;&amp; (detm &gt; -1.E-9) )
00413         success = FALSE;
00414         else
00415         {
00416                 detm = 1. / detm;
00417                 
00418                 MatRueck[0][0] = (a[4] * a[8] - a[5] * a[7]) * detm;
00419                 MatRueck[0][1] = (a[7] * a[2] - a[8] * a[1]) * detm;
00420                 MatRueck[0][2] = (hilf2       - hilf4      ) * detm;
00421         
00422                 MatRueck[1][0] = (a[5] * a[6] - a[3] * a[8]) * detm;
00423                 MatRueck[1][1] = (a[8] * a[0] - a[6] * a[2]) * detm;
00424                 MatRueck[1][2] = (hilf3       - hilf6      ) * detm;
00425         
00426                 MatRueck[2][0] = (a[3] * a[7] - a[4] * a[6]) * detm;
00427                 MatRueck[2][1] = (a[6] * a[1] - a[7] * a[0]) * detm;
00428                 MatRueck[2][2] = (hilf1       - hilf5      ) * detm;
00429         }
00430         
00431         <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a2">LH_END_PROC</a>(<span class="stringliteral">"doubMatrixInvert"</span>)
00432     return(success);
00433 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="lh_core/memlink.c::Fill_mft1_InputTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a> Fill_mft1_InputTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a28">Ptr</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>theElut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d2/structicLut8.html">icLut8</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>lutPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d4/d7/w98_2lh__core_2typedefs_8h.html#a13">CMMModelPtr</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>modelData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00281">281</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
References <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00591">icLut8::clutPoints</a>, <a class="el" href="../../d3/d5/lh__open_2pi__app_8h-source.html#l00023">CMError</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00602">icLut8::data</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00589">icLut8::inputChan</a>, <a class="el" href="../../d6/d9/lh__open_2general_8h.html#a94a89">kCMMNewLinkProfile</a>, <a class="el" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00071">OSErr</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00030">UINT8</a>.
<p>
<pre class="fragment"><div>00284 {
00285     <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a35">OSErr</a>                       err = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>;
00286     <span class="keywordtype">long</span>                        i;
00287     <span class="keywordtype">long</span>                        j;
00288     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       factor;
00289     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       round;
00290     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       shift;
00291     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       ulAux;
00292     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>      *wordElut = (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>*)theElut;
00293     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       newScale = 255;
00294     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       oldScale = ((1U&lt;&lt; modelData-&gt;lutParam.inputLutWordSize) * (lutPtr-&gt;<a class="code" href="../../d8/d2/structicLut8.html#o2">clutPoints</a>-1)) / lutPtr-&gt;<a class="code" href="../../d8/d2/structicLut8.html#o2">clutPoints</a>;
00295 
00296     <span class="keywordflow">if</span>( modelData-&gt;currentCall == <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a94a89">kCMMNewLinkProfile</a> ){
00297                 oldScale = 1&lt;&lt; modelData-&gt;lutParam.inputLutWordSize;
00298         }
00299         factor = (newScale &lt;&lt; 24) / oldScale;
00300     round  = (1&lt;&lt;(24-1))-1;
00301     shift  = 24;
00302 
00303     ulAux = ~( (1&lt;&lt; (32-modelData-&gt;lutParam.inputLutWordSize))-1);
00304         <span class="keywordflow">while</span> (factor &amp; ulAux ) <span class="comment">/* stay within 16 bits to prevent product overflow */</span>
00305     {
00306         factor &gt;&gt;= 1;
00307         round  &gt;&gt;= 1;
00308         shift   -= 1;
00309     }
00310 
00311     <span class="keywordflow">for</span> (i=0; i&lt;(<span class="keywordtype">long</span>)lutPtr-&gt;<a class="code" href="../../d8/d2/structicLut8.html#o0">inputChan</a>; i++)
00312     {
00313         <span class="keywordflow">for</span> (j=0; j&lt; 256; j++)
00314         {
00315             ulAux    = ((<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)*wordElut * factor + round) &gt;&gt; shift;
00316             lutPtr-&gt;<a class="code" href="../../d8/d2/structicLut8.html#o13">data</a>[i * 256 + j] = (<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a6">UINT8</a>)(ulAux );
00317             wordElut++;
00318         }
00319     }
00320     <span class="keywordflow">return</span> err;
00321 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="lh_core/memlink.c::Fill_mft1_OutputTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a> Fill_mft1_OutputTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a28">Ptr</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>theAlut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d2/structicLut8.html">icLut8</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>lutPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d4/d7/w98_2lh__core_2typedefs_8h.html#a13">CMMModelPtr</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>modelData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00346">346</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
References <a class="el" href="../../d3/d5/lh__open_2pi__app_8h-source.html#l00023">CMError</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00602">icLut8::data</a>, <a class="el" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00071">OSErr</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00590">icLut8::outputChan</a>, and <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00030">UINT8</a>.
<p>
<pre class="fragment"><div>00350 {
00351     <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a35">OSErr</a>       err = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>;
00352     <span class="keywordtype">long</span>        i;
00353     <span class="keywordtype">long</span>        j;
00354     <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a6">UINT8</a>*      byteAlut = (<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a6">UINT8</a>*)theAlut;
00355     <span class="keywordtype">long</span>        numOfAlutEntries = modelData-&gt;lutParam.outputLutEntryCount;
00356 
00357     <span class="keywordflow">for</span> (i=0; i&lt;(<span class="keywordtype">long</span>)lutPtr-&gt;<a class="code" href="../../d8/d2/structicLut8.html#o1">outputChan</a>; i++)
00358     {
00359         <span class="keywordflow">for</span> (j=0; j&lt;256; j++)
00360         {
00361             byteAlut = (<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a6">UINT8</a>*)theAlut + (j * (numOfAlutEntries-1)) / 255 ;
00362             lutPtr-&gt;<a class="code" href="../../d8/d2/structicLut8.html#o13">data</a>[offset + i * 256 + j] = *byteAlut;
00363         }
00364                 theAlut +=  numOfAlutEntries;
00365     }
00366     <span class="keywordflow">return</span> err;
00367 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="lh_core/memlink.c::Fill_mft2_ColorTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a> Fill_mft2_ColorTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a28">Ptr</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>theClut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structicLut16.html">icLut16</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>lutPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>count</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00502">502</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
References <a class="el" href="../../d3/d5/lh__open_2pi__app_8h-source.html#l00023">CMError</a>, <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00041">CMHelperICC2int16Const</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00577">icLut16::data</a>, <a class="el" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00071">OSErr</a>, and <a class="el" href="../../d0/d7/udf_8h-source.html#l00235">UINT16</a>.
<p>
<pre class="fragment"><div>00506 {
00507     <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a35">OSErr</a>       err = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>;
00508     <span class="keywordtype">long</span>        i;
00509     <a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>*     wordClut = (<a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>*)theClut;
00510     <a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>*     wordData = (<a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>*)lutPtr-&gt;<a class="code" href="../../d6/d2/structicLut16.html#o15">data</a> + offset;
00511 
00512     <span class="keywordflow">for</span> ( i=0; i&lt;count; i++)
00513     {
00514         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a0">CMHelperICC2int16Const</a>( wordData, *wordClut );
00515                 wordData++;
00516         wordClut++;
00517     }
00518     <span class="keywordflow">return</span> err;
00519 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="lh_core/memlink.c::Fill_mft2_InputTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a> Fill_mft2_InputTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a28">Ptr</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>theElut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structicLut16.html">icLut16</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>lutPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d4/d7/w98_2lh__core_2typedefs_8h.html#a13">CMMModelPtr</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>modelData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00389">389</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
References <a class="el" href="../../d3/d5/lh__open_2pi__app_8h-source.html#l00023">CMError</a>, <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00041">CMHelperICC2int16Const</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00577">icLut16::data</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00562">icLut16::inputChan</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00575">icLut16::inputEnt</a>, <a class="el" href="../../d6/d9/lh__open_2general_8h.html#a94a89">kCMMNewLinkProfile</a>, <a class="el" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00071">OSErr</a>, and <a class="el" href="../../d0/d7/udf_8h-source.html#l00235">UINT16</a>.
<p>
<pre class="fragment"><div>00392 {
00393     <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a35">OSErr</a>                       err = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>;
00394     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       factor;
00395     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       round;
00396     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       shift;
00397     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       ulAux;
00398     <span class="keywordtype">long</span>                        i;
00399     <span class="keywordtype">long</span>                        j;
00400     <a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>*                     wordElut = (<a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>*)theElut;
00401     <a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>*                     wordData = (<a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>*)lutPtr-&gt;<a class="code" href="../../d6/d2/structicLut16.html#o15">data</a>;
00402     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       newScale = 65535;
00403 
00404     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       oldScale = ( (1&lt;&lt;modelData-&gt;lutParam.inputLutWordSize) * (modelData-&gt;lutParam.colorLutGridPoints-1)) / modelData-&gt;lutParam.colorLutGridPoints;
00405 
00406     <span class="keywordflow">if</span>( modelData-&gt;currentCall == <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a94a89">kCMMNewLinkProfile</a> ){
00407                 oldScale = 1&lt;&lt; modelData-&gt;lutParam.inputLutWordSize;
00408         }
00409         factor = (newScale &lt;&lt; 15) / oldScale;
00410     round  = (1&lt;&lt;(15-1))-1;
00411     shift  = 15;
00412 
00413     <span class="keywordflow">while</span> (factor &amp; 0xFFFF0000) <span class="comment">/* stay within 16 bits to prevent product overflow */</span>
00414     {
00415         factor &gt;&gt;= 1;
00416         round  &gt;&gt;= 1;
00417         shift   -= 1;
00418     }
00419 
00420      <span class="keywordflow">for</span> (i=0; i&lt;(<span class="keywordtype">long</span>)lutPtr-&gt;<a class="code" href="../../d6/d2/structicLut16.html#o0">inputChan</a>; i++)
00421     {
00422         <span class="keywordflow">for</span> (j=0; j&lt; (<span class="keywordtype">long</span>)lutPtr-&gt;<a class="code" href="../../d6/d2/structicLut16.html#o13">inputEnt</a>; j++)
00423         {
00424             ulAux    = ((<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)*wordElut * factor + round) &gt;&gt; shift;
00425                         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a0">CMHelperICC2int16Const</a>( wordData, ulAux );
00426                         wordData++;
00427             wordElut++;
00428         }
00429     }
00430     <span class="keywordflow">return</span> err;
00431 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="lh_core/memlink.c::Fill_mft2_OutputTable" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a> Fill_mft2_OutputTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a28">Ptr</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>theAlut</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d6/d2/structicLut16.html">icLut16</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>lutPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d4/d7/w98_2lh__core_2typedefs_8h.html#a13">CMMModelPtr</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>modelData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00455">455</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
References <a class="el" href="../../d3/d5/lh__open_2pi__app_8h-source.html#l00023">CMError</a>, <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00041">CMHelperICC2int16Const</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00577">icLut16::data</a>, <a class="el" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00071">OSErr</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00563">icLut16::outputChan</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00576">icLut16::outputEnt</a>, and <a class="el" href="../../d0/d7/udf_8h-source.html#l00235">UINT16</a>.
<p>
<pre class="fragment"><div>00459 {
00460     <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a35">OSErr</a>       err = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>;
00461     <span class="keywordtype">long</span>        i;
00462     <span class="keywordtype">long</span>        j;
00463     <a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>*     wordAlut = (<a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>*)theAlut;
00464     <a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>*     wordData = (<a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>*)lutPtr-&gt;<a class="code" href="../../d6/d2/structicLut16.html#o15">data</a> + offset;
00465 
00466     modelData = modelData;
00467     <span class="keywordflow">for</span> (i=0; i&lt;(<span class="keywordtype">long</span>)lutPtr-&gt;<a class="code" href="../../d6/d2/structicLut16.html#o1">outputChan</a>; i++)
00468     {
00469         <span class="keywordflow">for</span> (j=0; j&lt;(<span class="keywordtype">long</span>)lutPtr-&gt;<a class="code" href="../../d6/d2/structicLut16.html#o14">outputEnt</a>; j++)
00470         {
00471             <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a0">CMHelperICC2int16Const</a>( wordData, *wordAlut );
00472                         wordData++;
00473             wordAlut++;
00474         }
00475     }
00476     <span class="keywordflow">return</span> err;
00477 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="lh_core/memlink.c::GetMatrixedVal" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> double GetMatrixedVal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">double&nbsp;</td>
          <td class="mdname" nowrap> <em>m</em>[3][3], </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>color</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d5/d1/structMyDoubleXYZ.html">MyDoubleXYZ</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>aXYZ</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00866">866</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
References <a class="el" href="../../d4/d5/w98_2lh__core_2memlink_8h-source.html#l00026">MyDoubleXYZ::X</a>, <a class="el" href="../../d4/d5/w98_2lh__core_2memlink_8h-source.html#l00026">MyDoubleXYZ::Y</a>, and <a class="el" href="../../d4/d5/w98_2lh__core_2memlink_8h-source.html#l00026">MyDoubleXYZ::Z</a>.
<p>
<pre class="fragment"><div>00867 {
00868         <span class="keywordtype">double</span> tmp;
00869         tmp = m[color][0] * aXYZ-&gt;<a class="code" href="../../d5/d1/structMyDoubleXYZ.html#o0">X</a>;
00870         tmp+= m[color][1] * aXYZ-&gt;<a class="code" href="../../d5/d1/structMyDoubleXYZ.html#o1">Y</a>;
00871         tmp+= m[color][2] * aXYZ-&gt;<a class="code" href="../../d5/d1/structMyDoubleXYZ.html#o2">Z</a>;
00872         <span class="keywordflow">return</span> tmp;
00873 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="lh_core/memlink.c::GetSizes" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a> GetSizes           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d7/w98_2lh__core_2typedefs_8h.html#a13">CMMModelPtr</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cw</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>clutSize</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00579">579</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
References <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00069">Fixed</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00347">icUInt16Number</a>, <a class="el" href="../../d6/d5/lh__core_2defines_8h-source.html#l00041">LOCK_DATA</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00070">OSType</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00040">SINT32</a>, <a class="el" href="../../d0/d7/udf_8h-source.html#l00235">UINT16</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00032">UINT32</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00030">UINT8</a>, and <a class="el" href="../../d6/d5/lh__core_2defines_8h-source.html#l00042">UNLOCK_DATA</a>.
<p>
<pre class="fragment"><div>00580 {
00581         <a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>                  inputChannels;
00582         <a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>                  outputChannels;
00583         <a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>                  gridPoints;
00584         <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a14">SINT32</a>                  colorLutSize;
00585         <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a8">UINT32</a>                  i,theSize;
00586 
00587         <a class="code" href="../../d5/d6/lh__core_2defines_8h.html#a6">LOCK_DATA</a>(cw-&gt;lutParam.inputLut);
00588         <a class="code" href="../../d5/d6/lh__core_2defines_8h.html#a6">LOCK_DATA</a>(cw-&gt;lutParam.colorLut);
00589         <a class="code" href="../../d5/d6/lh__core_2defines_8h.html#a6">LOCK_DATA</a>(cw-&gt;lutParam.outputLut);
00590         
00591         inputChannels  = (<a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>)cw-&gt;lutParam.colorLutInDim;
00592         outputChannels = (<a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>)cw-&gt;lutParam.colorLutOutDim;
00593         gridPoints         = (<a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>)cw-&gt;lutParam.colorLutGridPoints;
00594         
00595         colorLutSize = outputChannels;
00596         <span class="keywordflow">for</span>(i = 0; i &lt; inputChannels; i++)
00597                 colorLutSize *= gridPoints;
00598 
00599         <span class="keywordflow">if</span> ( cw-&gt;lutParam.colorLutWordSize != 8){
00600                 theSize = <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a34">OSType</a>) + <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a8">UINT32</a>) + (4 * <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a6">UINT8</a>)) + (9 * <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a33">Fixed</a>))                   <span class="comment">/* typeDescriptor...matrix */</span>
00601                                         + 2 * <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a185">icUInt16Number</a>)                                                                                                            <span class="comment">/* inputLutEntryCount outputLutEntryCount*/</span>
00602                                         + (inputChannels * cw-&gt;lutParam.inputLutEntryCount * <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>))                            <span class="comment">/* inputTable */</span>
00603                                         + (outputChannels * cw-&gt;lutParam.outputLutEntryCount * <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>))                          <span class="comment">/* CLUT */</span>
00604                                         + colorLutSize * <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>);                                                                                                                                                <span class="comment">/* outputTable */</span>
00605         }
00606         <span class="keywordflow">else</span>{
00607                 theSize = <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a34">OSType</a>) + <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a8">UINT32</a>) + (4 * <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a6">UINT8</a>)) + (9 * <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a33">Fixed</a>))                   <span class="comment">/* typeDescriptor...matrix */</span>
00608                                         + (inputChannels * 256 * <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a6">UINT8</a>))                                                                                         <span class="comment">/* inputTable */</span>
00609                                         + (outputChannels * 256 * <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a6">UINT8</a>))                                                                                        <span class="comment">/* CLUT */</span>
00610                                         + colorLutSize;                                                                                                                                         <span class="comment">/* outputTable */</span>
00611         }
00612         *clutSize = colorLutSize;
00613         <a class="code" href="../../d5/d6/lh__core_2defines_8h.html#a7">UNLOCK_DATA</a>(cw-&gt;lutParam.inputLut);
00614         <a class="code" href="../../d5/d6/lh__core_2defines_8h.html#a7">UNLOCK_DATA</a>(cw-&gt;lutParam.colorLut);
00615         <a class="code" href="../../d5/d6/lh__core_2defines_8h.html#a7">UNLOCK_DATA</a>(cw-&gt;lutParam.outputLut);
00616         <span class="keywordflow">return</span> theSize;
00617 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="lh_core/memlink.c::MakeMyDoubleXYZ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void MakeMyDoubleXYZ           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d5/d1/structMyDoubleXYZ.html">MyDoubleXYZ</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ret</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00841">841</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
References <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00534">icXYZNumber::X</a>, <a class="el" href="../../d4/d5/w98_2lh__core_2memlink_8h-source.html#l00026">MyDoubleXYZ::X</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00535">icXYZNumber::Y</a>, <a class="el" href="../../d4/d5/w98_2lh__core_2memlink_8h-source.html#l00026">MyDoubleXYZ::Y</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00536">icXYZNumber::Z</a>, and <a class="el" href="../../d4/d5/w98_2lh__core_2memlink_8h-source.html#l00026">MyDoubleXYZ::Z</a>.
<p>
<pre class="fragment"><div>00842 {
00843         ret-&gt;<a class="code" href="../../d5/d1/structMyDoubleXYZ.html#o0">X</a> = x-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o0">X</a>/(<span class="keywordtype">double</span>)(1&lt;&lt;30);
00844         ret-&gt;<a class="code" href="../../d5/d1/structMyDoubleXYZ.html#o1">Y</a> = x-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o1">Y</a>/(<span class="keywordtype">double</span>)(1&lt;&lt;30);
00845         ret-&gt;<a class="code" href="../../d5/d1/structMyDoubleXYZ.html#o2">Z</a> = x-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o2">Z</a>/(<span class="keywordtype">double</span>)(1&lt;&lt;30);
00846 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="lh_core/memlink.c::MakeXYZNumber" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> MakeXYZNumber           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>x</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00831">831</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
References <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00534">icXYZNumber::X</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00535">icXYZNumber::Y</a>, and <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00536">icXYZNumber::Z</a>.
<p>
<pre class="fragment"><div>00832 {
00833         <a class="code" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> ret;
00834         ret.<a class="code" href="../../d8/d6/structicXYZNumber.html#o0">X</a> = x-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o0">X</a>&gt;&gt;14;
00835         ret.<a class="code" href="../../d8/d6/structicXYZNumber.html#o1">Y</a> = x-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o1">Y</a>&gt;&gt;14;
00836         ret.<a class="code" href="../../d8/d6/structicXYZNumber.html#o2">Z</a> = x-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o2">Z</a>&gt;&gt;14;
00837         <span class="keywordflow">return</span> ret;
00838 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="lh_core/memlink.c::MyAdd_NL_AToB0Tag_mft1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a> MyAdd_NL_AToB0Tag_mft1           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d7/w98_2lh__core_2typedefs_8h.html#a13">CMMModelPtr</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cw</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d9/d2/structicLut8Type.html">icLut8Type</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>lutPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>colorLutSize</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00521">521</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
<pre class="fragment"><div>00522 {
00523         <a class="code" href="../../d2/d6/lh__open_2pi__app_8h.html#a11">CMError</a>                 err;
00524         <a class="code" href="../../d8/d2/structicLut8.html">icLut8</a>                  *tempLutPtr;
00525         <span class="keywordtype">long</span>                    offset;
00526         <a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>                  inputChannels;
00527         <a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>                  outputChannels;
00528         <a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>                  gridPoints;
00529         
00530         <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a1">LH_START_PROC</a>(<span class="stringliteral">"Add_NL_AToB0Tag_mft1"</span>)
00531 
00532         LOCK_DATA(cw-&gt;lutParam.inputLut);
00533         LOCK_DATA(cw-&gt;lutParam.colorLut);
00534         LOCK_DATA(cw-&gt;lutParam.outputLut);
00535         
00536         inputChannels  = (UINT16)cw-&gt;lutParam.colorLutInDim;
00537         outputChannels = (UINT16)cw-&gt;lutParam.colorLutOutDim;
00538         gridPoints         = (UINT16)cw-&gt;lutParam.colorLutGridPoints;
00539         
00540         tempLutPtr      = &amp;lutPtr-&gt;lut;
00541         CMHelperICC2int32Const(&amp;(lutPtr-&gt;base ), icSigLut8Type);
00542         CMHelperICC2int32Const((OSType*)&amp;(lutPtr-&gt;base )+1, 0);
00543         tempLutPtr-&gt;inputChan   = (UINT8)inputChannels;
00544         tempLutPtr-&gt;outputChan  = (UINT8)outputChannels;
00545         tempLutPtr-&gt;clutPoints  = (UINT8)gridPoints;
00546         tempLutPtr-&gt;e00 = tempLutPtr-&gt;e01 = tempLutPtr-&gt;e02 = 0;
00547         tempLutPtr-&gt;e10 = tempLutPtr-&gt;e11 = tempLutPtr-&gt;e12 = 0;
00548         tempLutPtr-&gt;e20 = tempLutPtr-&gt;e21 = tempLutPtr-&gt;e22 = 0;
00549         CMHelperICC2int32Const(&amp;(tempLutPtr-&gt;e00        ), 0x10000);
00550         CMHelperICC2int32Const(&amp;(tempLutPtr-&gt;e11        ), 0x10000);
00551         CMHelperICC2int32Const(&amp;(tempLutPtr-&gt;e22        ), 0x10000);
00552 
00553         err = Fill_mft1_InputTable((Ptr)DATA_2_PTR(cw-&gt;lutParam.inputLut), tempLutPtr, cw);
00554         if (err)
00555                 goto CleanupAndExit;
00556 
00557         offset = 256 * inputChannels;
00558         BlockMoveData( DATA_2_PTR(cw-&gt;lutParam.colorLut), &amp; tempLutPtr-&gt;data[0] + offset, colorLutSize);
00559 
00560         offset = offset + colorLutSize;
00561         err = Fill_mft1_OutputTable((Ptr)DATA_2_PTR(cw-&gt;lutParam.outputLut),  tempLutPtr, offset, cw);
00562         if (err)
00563                 goto CleanupAndExit;
00564 
00565 CleanupAndExit:
00566 
00567         #ifdef DEBUG_OUTPUT
00568         if ( err  )
00569                 DebugPrint("¥ MyAdd_NL_AToB0Tag_mft1-Error: result = %d\n",err);
00570         #endif
00571         UNLOCK_DATA(cw-&gt;lutParam.inputLut);
00572         UNLOCK_DATA(cw-&gt;lutParam.colorLut);
00573         UNLOCK_DATA(cw-&gt;lutParam.outputLut);
00574         LH_END_PROC("Add_NL_AToB0Tag_mft1")
00575         return err;
00576 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="lh_core/memlink.c::MyAdd_NL_AToB0Tag_mft2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a> MyAdd_NL_AToB0Tag_mft2           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d7/w98_2lh__core_2typedefs_8h.html#a13">CMMModelPtr</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cw</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d2/structicLut16Type.html">icLut16Type</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>lutPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>colorLutSize</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00619">619</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
<pre class="fragment"><div>00620 {
00621         <a class="code" href="../../d2/d6/lh__open_2pi__app_8h.html#a11">CMError</a>                 err;
00622         <a class="code" href="../../d6/d2/structicLut16.html">icLut16</a>                 *tempLutPtr;
00623         <span class="keywordtype">long</span>                    offset;
00624         <a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>                  inputChannels;
00625         <a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>                  outputChannels;
00626         <a class="code" href="../../d9/d7/udf_8h.html#a24">UINT16</a>                  gridPoints;
00627         
00628         <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a1">LH_START_PROC</a>(<span class="stringliteral">"Add_NL_AToB0Tag_mft2"</span>)
00629 
00630         LOCK_DATA(cw-&gt;lutParam.inputLut);
00631         LOCK_DATA(cw-&gt;lutParam.colorLut);
00632         LOCK_DATA(cw-&gt;lutParam.outputLut);
00633         
00634         inputChannels  = (UINT16)cw-&gt;lutParam.colorLutInDim;
00635         outputChannels = (UINT16)cw-&gt;lutParam.colorLutOutDim;
00636         gridPoints         = (UINT16)cw-&gt;lutParam.colorLutGridPoints;
00637         
00638         tempLutPtr      = &amp;lutPtr-&gt;lut;
00639         CMHelperICC2int32Const(&amp;(lutPtr-&gt;base ), icSigLut16Type);
00640         CMHelperICC2int32Const((OSType*)&amp;(lutPtr-&gt;base )+1, 0);
00641         tempLutPtr-&gt;inputChan   = (UINT8)inputChannels;
00642         tempLutPtr-&gt;outputChan  = (UINT8)outputChannels;
00643         tempLutPtr-&gt;clutPoints  = (UINT8)((gridPoints&gt;255)?255:gridPoints);
00644         tempLutPtr-&gt;e00 = tempLutPtr-&gt;e01 = tempLutPtr-&gt;e02 = 0;
00645         tempLutPtr-&gt;e10 = tempLutPtr-&gt;e11 = tempLutPtr-&gt;e12 = 0;
00646         tempLutPtr-&gt;e20 = tempLutPtr-&gt;e21 = tempLutPtr-&gt;e22 = 0;
00647         CMHelperICC2int32Const(&amp;(tempLutPtr-&gt;e00        ), 0x10000);
00648         CMHelperICC2int32Const(&amp;(tempLutPtr-&gt;e11        ), 0x10000);
00649         CMHelperICC2int32Const(&amp;(tempLutPtr-&gt;e22        ), 0x10000);
00650 
00651         tempLutPtr-&gt;inputEnt    = (UINT16)cw-&gt;lutParam.inputLutEntryCount;
00652         tempLutPtr-&gt;outputEnt   = (UINT16)cw-&gt;lutParam.outputLutEntryCount;
00653         err = Fill_mft2_InputTable((Ptr)DATA_2_PTR(cw-&gt;lutParam.inputLut), tempLutPtr, cw);
00654         if (err)
00655                 goto CleanupAndExit;
00656 
00657         offset = cw-&gt;lutParam.inputLutEntryCount * inputChannels;
00658         Fill_mft2_ColorTable( (Ptr)DATA_2_PTR(cw-&gt;lutParam.colorLut), tempLutPtr, offset, colorLutSize);
00659 
00660         offset = offset + colorLutSize;
00661         err = Fill_mft2_OutputTable((Ptr)DATA_2_PTR(cw-&gt;lutParam.outputLut),  tempLutPtr, offset, cw);
00662         if (err)
00663                 goto CleanupAndExit;
00664 
00665         CMHelperICC2int16Const(&amp;(tempLutPtr-&gt;inputEnt   ), (UINT16)cw-&gt;lutParam.inputLutEntryCount);
00666         CMHelperICC2int16Const(&amp;(tempLutPtr-&gt;outputEnt  ), (UINT16)cw-&gt;lutParam.outputLutEntryCount);
00667 
00668 CleanupAndExit:
00669 
00670         #ifdef DEBUG_OUTPUT
00671         if ( err  )
00672                 DebugPrint("¥ MyAdd_NL_AToB0Tag_mft2-Error: result = %d\n",err);
00673         #endif
00674         UNLOCK_DATA(cw-&gt;lutParam.inputLut);
00675         UNLOCK_DATA(cw-&gt;lutParam.colorLut);
00676         UNLOCK_DATA(cw-&gt;lutParam.outputLut);
00677         LH_END_PROC("Add_NL_AToB0Tag_mft2")
00678         return err;
00679 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="lh_core/memlink.c::MyAdd_NL_ColorantTag" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a> MyAdd_NL_ColorantTag           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d6/structicXYZType.html">icXYZType</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>descPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>aColor</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00222">222</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
<pre class="fragment"><div>00223 {
00224         <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a35">OSErr</a>                                   err = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>;
00225         
00226         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(descPtr-&gt;<a class="code" href="../../d9/d6/structicXYZType.html#o0">base</a> ), icSigXYZType);
00227         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>((OSType*)&amp;(descPtr-&gt;<a class="code" href="../../d9/d6/structicXYZType.html#o0">base</a> )+1, 0);
00228         <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a7">CMHelperICC2int32</a>(&amp;(descPtr-&gt;<a class="code" href="../../d9/d6/structicXYZType.html#o1">data</a>.<a class="code" href="../../d7/d6/structicXYZArray.html#o0">data</a>[0].<a class="code" href="../../d8/d6/structicXYZNumber.html#o0">X</a>      ), &amp;aColor-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o0">X</a>);
00229         <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a7">CMHelperICC2int32</a>(&amp;(descPtr-&gt;<a class="code" href="../../d9/d6/structicXYZType.html#o1">data</a>.<a class="code" href="../../d7/d6/structicXYZArray.html#o0">data</a>[0].<a class="code" href="../../d8/d6/structicXYZNumber.html#o1">Y</a>      ), &amp;aColor-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o1">Y</a>);
00230         <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a7">CMHelperICC2int32</a>(&amp;(descPtr-&gt;<a class="code" href="../../d9/d6/structicXYZType.html#o1">data</a>.<a class="code" href="../../d7/d6/structicXYZArray.html#o0">data</a>[0].<a class="code" href="../../d8/d6/structicXYZNumber.html#o2">Z</a>      ), &amp;aColor-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o2">Z</a>);
00231         <span class="keywordflow">return</span> err;
00232 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="lh_core/memlink.c::MyAdd_NL_CopyrightTag" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a> MyAdd_NL_CopyrightTag           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>copyrightText</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d7/d8/structLHTextType.html">LHTextType</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>aLHTextType</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00245">245</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
<pre class="fragment"><div>00246 {
00247     <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a35">OSErr</a>                       err=<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>;
00248 
00249     copyrightText[copyrightText[0]] = 0x00;
00250     <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(aLHTextType-&gt;<a class="code" href="../../d7/d8/structLHTextType.html#o0">base</a> ), icSigTextType);
00251         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>((OSType*)&amp;(aLHTextType-&gt;<a class="code" href="../../d7/d8/structLHTextType.html#o0">base</a> )+1, 0);
00252     <a class="code" href="../../d9/d7/w98_2lh__open_2pi__mem_8h.html#a10">BlockMove</a>(&amp;copyrightText[1], &amp;aLHTextType-&gt;<a class="code" href="../../d7/d8/structLHTextType.html#o2">text</a>[0], copyrightText[0]);
00253 
00254 <span class="preprocessor">#ifdef DEBUG_OUTPUT</span>
00255 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ( err &amp;&amp; DebugCheck(kThisFile, kDebugErrorInfo) )
00256         <a class="code" href="../../d7/d2/drivesup_8c.html#a0">DebugPrint</a>(<span class="stringliteral">"¥ MyAdd_NL_CopyrightTag-Error: result = %d\n"</span>,err);
00257 <span class="preprocessor">#endif</span>
00258 <span class="preprocessor"></span>    <span class="keywordflow">return</span> err;
00259 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="lh_core/memlink.c::MyAdd_NL_CurveTag" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a> MyAdd_NL_CurveTag           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d5/d1/structicCurveType.html">icCurveType</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>descPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>unsigned short&nbsp;</td>
          <td class="mdname" nowrap> <em>Gamma</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00234">234</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
<pre class="fragment"><div>00235 {
00236         <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a35">OSErr</a>                                   err = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>;
00237         
00238         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(descPtr-&gt;<a class="code" href="../../d5/d1/structicCurveType.html#o0">base</a> ), icSigCurveType);
00239         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>((OSType*)&amp;(descPtr-&gt;<a class="code" href="../../d5/d1/structicCurveType.html#o0">base</a> )+1, 0);
00240         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(descPtr-&gt;<a class="code" href="../../d5/d1/structicCurveType.html#o1">curve</a>.<a class="code" href="../../d4/d1/structicCurve.html#o0">count</a> ), 1);
00241         <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a6">CMHelperICC2int16</a>(&amp;(descPtr-&gt;<a class="code" href="../../d5/d1/structicCurveType.html#o1">curve</a>.<a class="code" href="../../d4/d1/structicCurve.html#o1">data</a>[0] ), &amp;Gamma );
00242         <span class="keywordflow">return</span> err;
00243 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="lh_core/memlink.c::MyAdd_NL_DescriptionTag" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a> MyAdd_NL_DescriptionTag           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d8/structLHTextDescriptionType.html">LHTextDescriptionType</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>descPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>theText</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00178">178</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
<pre class="fragment"><div>00179 {
00180         <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a28">Ptr</a>                                             thePtr;
00181         <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a35">OSErr</a>                                   err = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>;
00182         
00183         theText[theText[0]] = 0x00;
00184         
00185         <span class="comment">/*descPtr = (LHTextDescriptionType*)NewPtrClear( theSize );      */</span>
00186         <span class="keywordflow">if</span> (descPtr == 0)
00187                 <span class="keywordflow">return</span> -1;
00188         
00189         <span class="comment">/*------------------------------------------------------------------------ ASCII */</span>
00190         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(descPtr-&gt;<a class="code" href="../../d6/d8/structLHTextDescriptionType.html#o0">typeDescriptor</a> ), icSigTextDescriptionType);
00191         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(descPtr-&gt;<a class="code" href="../../d6/d8/structLHTextDescriptionType.html#o1">reserved</a> ), 0);
00192         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(descPtr-&gt;<a class="code" href="../../d6/d8/structLHTextDescriptionType.html#o2">ASCIICount</a>     ), (<span class="keywordtype">long</span>)theText[0]);
00193         thePtr = (<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a28">Ptr</a>) &amp;descPtr-&gt;<a class="code" href="../../d6/d8/structLHTextDescriptionType.html#o3">ASCIIName</a>[0];
00194         <a class="code" href="../../d9/d7/w98_2lh__open_2pi__mem_8h.html#a10">BlockMove</a>(&amp;theText[1], thePtr, theText[0]);
00195         thePtr += theText[0];
00196         
00197         <span class="comment">/*------------------------------------------------------------------------ Unicode */</span>
00199         <span class="comment">/*thePtr+=sizeof(unsigned long); */</span>
00200         *thePtr++ = 0;
00201         *thePtr++ = 0;
00202         *thePtr++ = 0;
00203         *thePtr++ = 0;
00205         <span class="comment">/*thePtr+=sizeof(unsigned long); */</span>
00206         *thePtr++ = 0;
00207         *thePtr++ = 0;
00208         *thePtr++ = 0;
00209         *thePtr++ = 0;
00210         <span class="comment">/*BlockMove(&amp;theText[1], thePtr, theText[0]);           //Unicode string  */</span>
00211         <span class="comment">/*thePtr += theText[0]; */</span>
00212         
00213         <span class="comment">/*------------------------------------------------------------------------ Macintosh */</span>
00216         *thePtr++ = 0;
00217         *thePtr++ = 0;
00218         <a class="code" href="../../d9/d7/w98_2lh__open_2pi__mem_8h.html#a10">BlockMove</a>(&amp;theText[0], thePtr, theText[0]+1);   
00219         <span class="keywordflow">return</span> err;
00220 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="lh_core/memlink.c::MyAdd_NL_Header" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a> MyAdd_NL_Header           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>theSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d2/structicHeader.html">icHeader</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>linkHeader</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>aIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>aClass</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>aColorSpace</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>aConnectionSpace</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00053">53</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
<pre class="fragment"><div>00055 {
00056         <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a35">OSErr</a>                                   err = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>;
00057 <span class="preprocessor">#if ! __IS_MSDOS</span>
00058 <span class="preprocessor"></span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>                   secs;
00059 <span class="preprocessor">#endif</span>
00060 <span class="preprocessor"></span>        <a class="code" href="../../d5/d7/structDateTimeRec.html">DateTimeRec</a>                             datetimeRec;
00061         <span class="comment">/*icHeader      linkHeader; */</span>
00062 
00063 <span class="preprocessor">#if __IS_MSDOS</span>
00064 <span class="preprocessor"></span>        SYSTEMTIME aSystemTime;
00065         GetLocalTime( (SYSTEMTIME *)&amp;aSystemTime);
00066         datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o0">year</a>         = aSystemTime.wYear;   datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o1">month</a>        = aSystemTime.wMonth;
00067         datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o2">day</a>          = aSystemTime.wDay;    datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o3">hour</a>         = aSystemTime.wHour;
00068         datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o4">minute</a>       = aSystemTime.wMinute; datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o5">second</a>       = aSystemTime.wSecond;
00069 <span class="preprocessor">#else</span>
00070 <span class="preprocessor"></span><span class="preprocessor">#if __IS_MAC</span>
00071 <span class="preprocessor"></span>        <a class="code" href="../../d7/d9/w98_2lh__open_2general_8h.html#a90">GetDateTime</a>(&amp;secs);
00072         <a class="code" href="../../d7/d9/w98_2lh__open_2general_8h.html#a91">SecondsToDate</a>(secs, &amp;datetimeRec);<span class="comment">/* Secs2Date  (link.*)=(.*); CMHelperICC2int32(\&amp;(\1),\2); */</span>
00073 <span class="preprocessor">#else</span>
00074 <span class="preprocessor"></span>    <span class="keyword">struct </span>tm* loctime;
00075     time_t long_time;
00076     time( &amp;long_time );                <span class="comment">/* Get time as long integer. */</span>
00077         loctime = localtime(&amp;long_time);
00078         datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o0">year</a>         = loctime-&gt;tm_year;    datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o1">month</a>       = loctime-&gt;tm_mon+1;
00079         datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o2">day</a>          = loctime-&gt;tm_mday;    datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o3">hour</a>        = loctime-&gt;tm_hour;
00080         datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o4">minute</a>       = loctime-&gt;tm_min;             datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o5">second</a>      = loctime-&gt;tm_sec;
00081 <span class="preprocessor">#endif</span>
00082 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00083 <span class="preprocessor"></span>        
00084         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o0">size</a>                               ), theSize);            <span class="comment">/* This is the total size of the CMProfileRef */</span>
00085         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o1">cmmId</a>                              ), 'Win ');                                                     <span class="comment">/* CMM signature,  Registered with ICC consortium  */</span>
00086         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o2">version</a>                    ), icVersionNumber);                            <span class="comment">/* Version of CMProfile format */</span>
00087         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o3">deviceClass</a>                ), aClass);                                     <span class="comment">/* input, display, output, devicelink, abstract, or color conversion profile type */</span>
00088         
00089         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o4">colorSpace</a>                 ), aColorSpace);        <span class="comment">/* color space of data = dataColorSpace of first profile*/</span>
00090 
00091         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o5">pcs</a>                                ), aConnectionSpace);   <span class="comment">/* profile connection color space = dataColorSpace of last profile*/</span>
00092         
00093         <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a6">CMHelperICC2int16</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o6">date</a>.<a class="code" href="../../d8/d1/structicDateTimeNumber.html#o0">year</a>                               ), &amp;datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o0">year</a>);                                  <span class="comment">/* date and time of profile creation */</span>
00094         <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a6">CMHelperICC2int16</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o6">date</a>.<a class="code" href="../../d8/d1/structicDateTimeNumber.html#o1">month</a>                              ), &amp;datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o1">month</a>); 
00095         <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a6">CMHelperICC2int16</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o6">date</a>.<a class="code" href="../../d8/d1/structicDateTimeNumber.html#o2">day</a>                                ), &amp;datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o2">day</a>);   
00096         <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a6">CMHelperICC2int16</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o6">date</a>.<a class="code" href="../../d8/d1/structicDateTimeNumber.html#o3">hours</a>                              ), &amp;datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o3">hour</a>);  
00097         <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a6">CMHelperICC2int16</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o6">date</a>.<a class="code" href="../../d8/d1/structicDateTimeNumber.html#o4">minutes</a>                    ), &amp;datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o4">minute</a>);        
00098         <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a6">CMHelperICC2int16</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o6">date</a>.<a class="code" href="../../d8/d1/structicDateTimeNumber.html#o5">seconds</a>                    ), &amp;datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o5">second</a>);        
00099         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o7">magic</a>                              ), icMagicNumber);                                      <span class="comment">/* 'acsp' constant ICC file ID */</span>
00100         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o8">platform</a>                   ), icSigMicrosoft);                                     <span class="comment">/* primary profile platform, Registered with ICC consortium */</span>
00101         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o9">flags</a>                              ), 0);                                                          <span class="comment">/* profile flags */</span>
00102         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o10">manufacturer</a>               ), icSigMicrosoft);                                                     <span class="comment">/* Registered with ICC consortium */</span>
00103         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o11">model</a>                              ), 0);                                                          <span class="comment">/* Registered with ICC consortium */</span>
00104         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o12">attributes</a>[0]              ), 0);                                                          <span class="comment">/* Attributes like paper type */</span>
00105         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o12">attributes</a>[1]              ), 0);
00106         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o13">renderingIntent</a>    ), aIntent );                                                           <span class="comment">/* preferred rendering intent of tagged object */</span>
00107         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o14">illuminant</a>.<a class="code" href="../../d8/d6/structicXYZNumber.html#o0">X</a>               ), 0.9642 * 65536);                                     <span class="comment">/* profile illuminant */</span>
00108         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o14">illuminant</a>.<a class="code" href="../../d8/d6/structicXYZNumber.html#o1">Y</a>               ), 1.0000 * 65536);
00109         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o14">illuminant</a>.<a class="code" href="../../d8/d6/structicXYZNumber.html#o2">Z</a>               ), 0.8249 * 65536);
00110         <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(&amp;(linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o16">creator</a>                    ), 'UJK ');
00111                 
00112         <span class="keywordflow">return</span> err;
00113 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="lh_core/memlink.c::MyAdd_NL_HeaderMS" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a> MyAdd_NL_HeaderMS           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>theSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d1/d2/structicHeader.html">icHeader</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>linkHeader</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>unsigned long&nbsp;</td>
          <td class="mdname" nowrap> <em>aIntent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d5/d7/mscmm_8w98_2lh__core_2profile_8h.html#a186">icColorSpaceSignature</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>sCS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d5/d7/mscmm_8w98_2lh__core_2profile_8h.html#a186">icColorSpaceSignature</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dCS</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00116">116</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
References <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00924">icHeader::attributes</a>, <a class="el" href="../../d3/d5/lh__open_2pi__app_8h-source.html#l00023">CMError</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00913">icHeader::cmmId</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00916">icHeader::colorSpace</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00927">icHeader::creator</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00918">icHeader::date</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00526">icDateTimeNumber::day</a>, <a class="el" href="../../d6/d5/w98_2lh__open_2pi__basic_8h-source.html#l00149">DateTimeRec::day</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00915">icHeader::deviceClass</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00921">icHeader::flags</a>, <a class="el" href="../../d7/d9/w98_2lh__open_2general_8h.html#a90">GetDateTime()</a>, <a class="el" href="../../d6/d5/w98_2lh__open_2pi__basic_8h-source.html#l00150">DateTimeRec::hour</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00527">icDateTimeNumber::hours</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00092">icMagicNumber</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00267">icSigLinkClass</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00276">icSigMicrosoft</a>, <a class="el" href="../../d8/d3/aug98_2dll32_2icc_8h-source.html#l00093">icVersionNumber</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00926">icHeader::illuminant</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00919">icHeader::magic</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00922">icHeader::manufacturer</a>, <a class="el" href="../../d6/d5/w98_2lh__open_2pi__basic_8h-source.html#l00151">DateTimeRec::minute</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00528">icDateTimeNumber::minutes</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00923">icHeader::model</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00525">icDateTimeNumber::month</a>, <a class="el" href="../../d6/d5/w98_2lh__open_2pi__basic_8h-source.html#l00148">DateTimeRec::month</a>, <a class="el" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>, <a class="el" href="../../d5/d5/lh__open_2pi__basic_8h-source.html#l00071">OSErr</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00917">icHeader::pcs</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00920">icHeader::platform</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00925">icHeader::renderingIntent</a>, <a class="el" href="../../d6/d5/w98_2lh__open_2pi__basic_8h-source.html#l00152">DateTimeRec::second</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00529">icDateTimeNumber::seconds</a>, <a class="el" href="../../d7/d9/w98_2lh__open_2general_8h.html#a91">SecondsToDate()</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00912">icHeader::size</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00914">icHeader::version</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00534">icXYZNumber::X</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00535">icXYZNumber::Y</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00524">icDateTimeNumber::year</a>, <a class="el" href="../../d6/d5/w98_2lh__open_2pi__basic_8h-source.html#l00147">DateTimeRec::year</a>, and <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00536">icXYZNumber::Z</a>.
<p>
<pre class="fragment"><div>00117 {
00118         <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a35">OSErr</a>                                   err = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>;
00119 <span class="preprocessor">#if ! __IS_MSDOS</span>
00120 <span class="preprocessor"></span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>                   secs;
00121 <span class="preprocessor">#endif</span>
00122 <span class="preprocessor"></span>        <a class="code" href="../../d5/d7/structDateTimeRec.html">DateTimeRec</a>                             datetimeRec;
00123         <span class="comment">/*icHeader      linkHeader; */</span>
00124 
00125 <span class="preprocessor">#if __IS_MSDOS</span>
00126 <span class="preprocessor"></span>        SYSTEMTIME aSystemTime;
00127         GetLocalTime( (SYSTEMTIME *)&amp;aSystemTime);
00128         datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o0">year</a>         = aSystemTime.wYear;   datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o1">month</a>        = aSystemTime.wMonth;
00129         datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o2">day</a>          = aSystemTime.wDay;    datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o3">hour</a>         = aSystemTime.wHour;
00130         datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o4">minute</a>       = aSystemTime.wMinute; datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o5">second</a>       = aSystemTime.wSecond;
00131 <span class="preprocessor">#else</span>
00132 <span class="preprocessor"></span><span class="preprocessor">#if __IS_MAC</span>
00133 <span class="preprocessor"></span>        <a class="code" href="../../d7/d9/w98_2lh__open_2general_8h.html#a90">GetDateTime</a>(&amp;secs);
00134         <a class="code" href="../../d7/d9/w98_2lh__open_2general_8h.html#a91">SecondsToDate</a>(secs, &amp;datetimeRec);<span class="comment">/* Secs2Date  (link.*)=(.*); CMHelperICC2int32(\&amp;(\1),\2); */</span>
00135 <span class="preprocessor">#else</span>
00136 <span class="preprocessor"></span>    <span class="keyword">struct </span>tm* loctime;
00137     time_t long_time;
00138     time( &amp;long_time );                <span class="comment">/* Get time as long integer. */</span>
00139         loctime = localtime(&amp;long_time);
00140         datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o0">year</a>         = loctime-&gt;tm_year;    datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o1">month</a>       = loctime-&gt;tm_mon+1;
00141         datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o2">day</a>          = loctime-&gt;tm_mday;    datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o3">hour</a>        = loctime-&gt;tm_hour;
00142         datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o4">minute</a>       = loctime-&gt;tm_min;             datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o5">second</a>      = loctime-&gt;tm_sec;
00143 <span class="preprocessor">#endif</span>
00144 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00145 <span class="preprocessor"></span>        
00146         
00147         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o0">size</a>                                = theSize;              <span class="comment">/* This is the total size of the CMProfileRef */</span>
00148         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o1">cmmId</a>                               = 'Win ';                                                       <span class="comment">/* CMM signature,  Registered with ICC consortium  */</span>
00149         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o2">version</a>                     = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a1">icVersionNumber</a>;                              <span class="comment">/* Version of CMProfile format */</span>
00150         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o3">deviceClass</a>                 = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a125">icSigLinkClass</a>;                                       <span class="comment">/* input, display, output, devicelink, abstract, or color conversion profile type */</span>
00151         
00152         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o4">colorSpace</a>                  = sCS;  <span class="comment">/* color space of data = dataColorSpace of first profile*/</span>
00153 
00154         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o5">pcs</a>                                 = dCS;  <span class="comment">/* profile connection color space = dataColorSpace of last profile*/</span>
00155         
00156         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o6">date</a>.<a class="code" href="../../d8/d1/structicDateTimeNumber.html#o0">year</a>                   = datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o0">year</a>;                                     <span class="comment">/* date and time of profile creation */</span>
00157         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o6">date</a>.<a class="code" href="../../d8/d1/structicDateTimeNumber.html#o1">month</a>                  = datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o1">month</a>;    
00158         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o6">date</a>.<a class="code" href="../../d8/d1/structicDateTimeNumber.html#o2">day</a>                    = datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o2">day</a>;      
00159         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o6">date</a>.<a class="code" href="../../d8/d1/structicDateTimeNumber.html#o3">hours</a>                  = datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o3">hour</a>;     
00160         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o6">date</a>.<a class="code" href="../../d8/d1/structicDateTimeNumber.html#o4">minutes</a>                = datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o4">minute</a>;   
00161         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o6">date</a>.<a class="code" href="../../d8/d1/structicDateTimeNumber.html#o5">seconds</a>                = datetimeRec.<a class="code" href="../../d5/d7/structDateTimeRec.html#o5">second</a>;   
00162         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o7">magic</a>                               = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a0">icMagicNumber</a>;                                        <span class="comment">/* 'acsp' constant ICC file ID */</span>
00163         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o8">platform</a>                    = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a130">icSigMicrosoft</a>;                                       <span class="comment">/* primary profile platform, Registered with ICC consortium */</span>
00164         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o9">flags</a>                               = 0;                                                            <span class="comment">/* profile flags */</span>
00165         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o10">manufacturer</a>                = <a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a130">icSigMicrosoft</a>;                                                       <span class="comment">/* Registered with ICC consortium */</span>
00166         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o11">model</a>                               = 0;                                                            <span class="comment">/* Registered with ICC consortium */</span>
00167         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o12">attributes</a>[0]               = 0;                                                            <span class="comment">/* Attributes like paper type */</span>
00168         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o12">attributes</a>[1]               = 0;
00169         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o13">renderingIntent</a>             = aIntent ;                                                             <span class="comment">/* preferred rendering intent of tagged object */</span>
00170         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o14">illuminant</a>.<a class="code" href="../../d8/d6/structicXYZNumber.html#o0">X</a>                = (<span class="keywordtype">long</span>)(0.9642 * 65536);                                       <span class="comment">/* profile illuminant */</span>
00171         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o14">illuminant</a>.<a class="code" href="../../d8/d6/structicXYZNumber.html#o1">Y</a>                = (<span class="keywordtype">long</span>)(1.0000 * 65536);
00172         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o14">illuminant</a>.<a class="code" href="../../d8/d6/structicXYZNumber.html#o2">Z</a>                = (<span class="keywordtype">long</span>)(0.8249 * 65536);
00173         linkHeader-&gt;<a class="code" href="../../d1/d2/structicHeader.html#o16">creator</a>                             = 'UJK ';
00174 
00175         <span class="keywordflow">return</span> err;
00176 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="lh_core/memlink.c::MyAdd_NL_SequenceDescTag" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a> MyAdd_NL_SequenceDescTag           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d3/structCMConcatProfileSet.html">CMConcatProfileSet</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>profileSet</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d3/structicProfileSequenceDescType.html">icProfileSequenceDescType</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pSeqPtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>long *&nbsp;</td>
          <td class="mdname" nowrap> <em>aSize</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00724">724</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
<pre class="fragment"><div>00727 {
00728         <a class="code" href="../../d2/d6/lh__open_2pi__app_8h.html#a11">CMError</a>                                         err;
00729         <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a35">OSErr</a>                                           aOSerr;
00730         <span class="comment">/*icProfileSequenceDescType*    pSeqPtr         = nil;*/</span>
00731         <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a28">Ptr</a>                                                     thePtr          = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a2">nil</a>;
00732         <a class="code" href="../../d1/d2/structicHeader.html">icHeader</a>                                        profHeader;
00733         <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a14">SINT32</a>                                          loop;
00734         <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a34">OSType</a>                                          technology;
00735         <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a8">UINT32</a>                                          elementSize;
00736         <a class="code" href="../../d4/d4/structicSignatureType.html">icSignatureType</a>                         theSignature;
00737         <a class="code" href="../../d0/d5/structicTextDescriptionType.html">icTextDescriptionType</a>*          descPtr         = <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a2">nil</a>;
00738         <span class="keywordtype">char</span>                                            descPtrNull[90]={0};
00739 
00740         <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a1">LH_START_PROC</a>(<span class="stringliteral">"MyAdd_NL_SequenceDescTag"</span>)
00741         
00742         CMHelperICC2int32Const(&amp;(((<a class="code" href="../../d0/d5/structicTextDescriptionType.html">icTextDescriptionType</a>*)descPtrNull)-&gt;base ), icSigTextDescriptionType );
00743         CMHelperICC2int32Const(((OSType*)&amp;((<a class="code" href="../../d0/d5/structicTextDescriptionType.html">icTextDescriptionType</a>*)descPtrNull)-&gt;base )+1, 0);
00744         CMHelperICC2int32Const(&amp;(((<a class="code" href="../../d0/d5/structicTextDescriptionType.html">icTextDescriptionType</a>*)descPtrNull)-&gt;desc.count ), 1 );
00745         <span class="comment">/*pSeqPtr =  (icProfileSequenceDescType*)SmartNewPtrClear(5000, &amp;aOSerr);</span>
00746 <span class="comment">        err = aOSerr;</span>
00747 <span class="comment">        if (err)</span>
00748 <span class="comment">                goto CleanupAndExit;*/</span>
00749         CMHelperICC2int32Const(&amp;(pSeqPtr-&gt;base ), icSigProfileSequenceDescType);
00750         CMHelperICC2int32Const((OSType*)&amp;(pSeqPtr-&gt;base )+1, 0);
00751         CMHelperICC2int32Const(&amp;(pSeqPtr-&gt;desc.count ), profileSet-&gt;count );
00752         thePtr = (Ptr)( (SIZE_T)&amp;(pSeqPtr-&gt;desc.count) + sizeof(SINT32) ) ;             
00753         
00754         for (loop = 0; loop &lt; (SINT32)profileSet-&gt;count; loop++)
00755         {
00756                 err = <a class="code" href="../../d7/d3/ntgdi_2icm_2mscmm_8w98_2mscmm_2access_8c.html#a0">CMGetProfileHeader</a>(profileSet-&gt;<a class="code" href="../../d9/d3/structCMConcatProfileSet.html#o2">profileSet</a>[loop], (<a class="code" href="../../d1/d2/structicHeader.html">CMCoreProfileHeader</a> *)&amp;profHeader);
00757                 <span class="keywordflow">if</span> (err)
00758                         <span class="keywordflow">goto</span> CleanupAndExit;
00759                 <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(thePtr, profHeader.<a class="code" href="../../d1/d2/structicHeader.html#o10">manufacturer</a>);
00760                 thePtr += <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a34">OSType</a>);
00761                 <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(thePtr, profHeader.<a class="code" href="../../d1/d2/structicHeader.html#o11">model</a>);
00762                 thePtr += <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a34">OSType</a>);
00763                 <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(thePtr, profHeader.<a class="code" href="../../d1/d2/structicHeader.html#o12">attributes</a>[0]);
00764                 thePtr += <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a8">UINT32</a>);
00765                 <a class="code" href="../../d0/d6/lh__core_2memlink_8c.html#a1">CMHelperICC2int32Const</a>(thePtr, profHeader.<a class="code" href="../../d1/d2/structicHeader.html#o12">attributes</a>[1]);
00766                 thePtr += <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a8">UINT32</a>);
00767                 
00768                 <span class="comment">/* ----------------------------------------------------------------- icSigTechnologyTag */</span>
00769                 technology = 0;
00770                 <span class="keywordflow">if</span> ( <a class="code" href="../../d7/d3/ntgdi_2icm_2mscmm_8w98_2mscmm_2access_8c.html#a1">CMGetProfileElement</a>(profileSet-&gt;<a class="code" href="../../d9/d3/structCMConcatProfileSet.html#o2">profileSet</a>[loop], icSigTechnologyTag, &amp;elementSize, nil) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>)
00771                 {
00772                         <span class="keywordflow">if</span> (elementSize == <span class="keyword">sizeof</span>(<a class="code" href="../../d7/d4/aug98_2dll32_2icc_8h.html#a59">icSigTechnologyTag</a>))
00773                         {
00774                                 <span class="keywordflow">if</span> ( <a class="code" href="../../d7/d3/ntgdi_2icm_2mscmm_8w98_2mscmm_2access_8c.html#a1">CMGetProfileElement</a>(profileSet-&gt;<a class="code" href="../../d9/d3/structCMConcatProfileSet.html#o2">profileSet</a>[loop], icSigTechnologyTag, &amp;elementSize, &amp;theSignature) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>)
00775                                         technology = theSignature.<a class="code" href="../../d4/d4/structicSignatureType.html#o1">signature</a>;
00776                         }
00777                 }
00778                 *((<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a34">OSType</a>*)thePtr) = technology;                                                                        <span class="comment">/* signature */</span>
00779                 thePtr += <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a34">OSType</a>);
00780                 
00781                 <span class="comment">/* ----------------------------------------------------------------- icSigDeviceMfgDescTag */</span>
00782                 <span class="keywordflow">if</span> ( <a class="code" href="../../d7/d3/ntgdi_2icm_2mscmm_8w98_2mscmm_2access_8c.html#a1">CMGetProfileElement</a>(profileSet-&gt;<a class="code" href="../../d9/d3/structCMConcatProfileSet.html#o2">profileSet</a>[loop], icSigDeviceMfgDescTag, &amp;elementSize, nil) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>)
00783                 {
00784                         descPtr = (<a class="code" href="../../d0/d5/structicTextDescriptionType.html">icTextDescriptionType</a>*)<a class="code" href="../../d9/d7/w98_2lh__open_2pi__mem_8h.html#a5">SmartNewPtr</a>(elementSize,&amp;aOSerr);
00785                         err = aOSerr;
00786                         <span class="keywordflow">if</span> (err)
00787                                 <span class="keywordflow">goto</span> CleanupAndExit;
00788                         <span class="keywordflow">if</span> ( <a class="code" href="../../d7/d3/ntgdi_2icm_2mscmm_8w98_2mscmm_2access_8c.html#a1">CMGetProfileElement</a>(profileSet-&gt;<a class="code" href="../../d9/d3/structCMConcatProfileSet.html#o2">profileSet</a>[loop], icSigDeviceMfgDescTag, &amp;elementSize, descPtr) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>)
00789                         {
00790                                 <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a3">BlockMoveData</a>( descPtr, thePtr, elementSize);
00791                                 thePtr += elementSize;
00792                         }
00793                         descPtr = (<a class="code" href="../../d0/d5/structicTextDescriptionType.html">icTextDescriptionType</a>*)<a class="code" href="../../d9/d7/w98_2lh__open_2pi__mem_8h.html#a4">DisposeIfPtr</a>((Ptr)descPtr);
00794                 } <span class="keywordflow">else</span>
00795                 {
00796                         <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a3">BlockMoveData</a>( descPtrNull, thePtr, <span class="keyword">sizeof</span>(descPtrNull));
00797                         thePtr += <span class="keyword">sizeof</span>(descPtrNull);
00798                 }
00799                 <span class="comment">/* ----------------------------------------------------------------- icSigDeviceModelDescTag */</span>
00800                 <span class="keywordflow">if</span> ( <a class="code" href="../../d7/d3/ntgdi_2icm_2mscmm_8w98_2mscmm_2access_8c.html#a1">CMGetProfileElement</a>(profileSet-&gt;<a class="code" href="../../d9/d3/structCMConcatProfileSet.html#o2">profileSet</a>[loop], icSigDeviceModelDescTag, &amp;elementSize, nil) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>)
00801                 {
00802                         descPtr = (<a class="code" href="../../d0/d5/structicTextDescriptionType.html">icTextDescriptionType</a>*)<a class="code" href="../../d9/d7/w98_2lh__open_2pi__mem_8h.html#a5">SmartNewPtr</a>(elementSize,&amp;aOSerr);
00803                         err = aOSerr;
00804                         <span class="keywordflow">if</span> (err)
00805                                 <span class="keywordflow">goto</span> CleanupAndExit;
00806                         <span class="keywordflow">if</span> ( <a class="code" href="../../d7/d3/ntgdi_2icm_2mscmm_8w98_2mscmm_2access_8c.html#a1">CMGetProfileElement</a>(profileSet-&gt;<a class="code" href="../../d9/d3/structCMConcatProfileSet.html#o2">profileSet</a>[loop], icSigDeviceModelDescTag, &amp;elementSize, descPtr) == <a class="code" href="../../d4/d6/lh__open_2pi__basic_8h.html#a58a55">noErr</a>)
00807                         {
00808                                 <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a3">BlockMoveData</a>( descPtr, thePtr, elementSize);
00809                                 thePtr += elementSize;
00810                         }
00811                         descPtr =  (<a class="code" href="../../d0/d5/structicTextDescriptionType.html">icTextDescriptionType</a>*)<a class="code" href="../../d9/d7/w98_2lh__open_2pi__mem_8h.html#a4">DisposeIfPtr</a>((Ptr)descPtr);
00812                 } <span class="keywordflow">else</span>
00813                 {
00814                         <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a3">BlockMoveData</a>( descPtrNull, thePtr, <span class="keyword">sizeof</span>(descPtrNull));
00815                         thePtr += <span class="keyword">sizeof</span>(descPtrNull);
00816                 }
00817                 <span class="comment">/* ----------------------------------------------------------------- */</span>
00818         }
00819 
00820    <span class="comment">//Sundown safe truncation</span>
00821         *aSize = (LONG)((ULONG_PTR)thePtr - (ULONG_PTR)pSeqPtr);
00822         
00823 CleanupAndExit:
00824         descPtr = (<a class="code" href="../../d0/d5/structicTextDescriptionType.html">icTextDescriptionType</a>*)<a class="code" href="../../d9/d7/w98_2lh__open_2pi__mem_8h.html#a4">DisposeIfPtr</a>((Ptr)descPtr);
00825         <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a2">LH_END_PROC</a>(<span class="stringliteral">"MyAdd_NL_SequenceDescTag"</span>)
00826         return err;
00827 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="lh_core/memlink.c::MyGetColorSpaces" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="../../d3/d6/w98_2lh__open_2pi__app_8h.html#a11">CMError</a> MyGetColorSpaces           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d3/structCMConcatProfileSet.html">CMConcatProfileSet</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>profileSet</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>sCS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d5/d6/w98_2lh__open_2pi__basic_8h.html#a8">UINT32</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>dCS</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00684">684</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
References <a class="el" href="../../d3/d5/lh__open_2pi__app_8h-source.html#l00023">CMError</a>, <a class="el" href="../../d8/d2/ntgdi_2icm_2mscmm_8w98_2mscmm_2access_8c-source.html#l00030">CMGetProfileHeader()</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00916">icHeader::colorSpace</a>, <a class="el" href="../../d4/d5/w98_2lh__open_2pi__app_8h-source.html#l00171">CMConcatProfileSet::count</a>, <a class="el" href="../../d7/d8/lh__open_2general_8h-source.html#l00053">LH_END_PROC</a>, <a class="el" href="../../d7/d8/lh__open_2general_8h-source.html#l00052">LH_START_PROC</a>, and <a class="el" href="../../d4/d5/w98_2lh__open_2pi__app_8h-source.html#l00172">CMConcatProfileSet::profileSet</a>.
<p>
<pre class="fragment"><div>00687 {
00688         <a class="code" href="../../d2/d6/lh__open_2pi__app_8h.html#a11">CMError</a>                                         err;
00689         <a class="code" href="../../d1/d2/structicHeader.html">icHeader</a>                                        profHeader;
00690 
00691         <a class="code" href="../../d6/d9/lh__open_2general_8h.html#a1">LH_START_PROC</a>(<span class="stringliteral">"MyGetColorSpaces"</span>)
00692         
00693         err = CMGetProfileHeader(profileSet-&gt;profileSet[0], (<a class="code" href="../../d1/d2/structicHeader.html">CMCoreProfileHeader</a> *)&amp;profHeader);
00694         if (err)
00695                 goto CleanupAndExit;
00696         *sCS = profHeader.colorSpace;
00697 
00698         err = CMGetProfileHeader(profileSet-&gt;profileSet[profileSet-&gt;count-1], (<a class="code" href="../../d1/d2/structicHeader.html">CMCoreProfileHeader</a> *)&amp;profHeader);
00699         if (err)
00700                 goto CleanupAndExit;
00701         *dCS = profHeader.colorSpace;
00702 
00703 CleanupAndExit:
00704         LH_END_PROC("MyAdd_NL_SequenceDescTag")
00705         return err;
00706 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="lh_core/memlink.c::NormalizeColor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void NormalizeColor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>r</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>g</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>b</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d5/d1/structMyDoubleXYZ.html">MyDoubleXYZ</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Illuminant</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>resR</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>resG</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>resB</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00876">876</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
References <a class="el" href="../../d3/d8/ps2_8c-source.html#l06379">g()</a>, <a class="el" href="../../d3/d6/w98_2lh__core_2memlink_8h.html#a5">MakeMyDoubleXYZ()</a>, <a class="el" href="../../d1/d0/lh__core_2dondim_8c-source.html#l00053">Round</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00534">icXYZNumber::X</a>, <a class="el" href="../../d4/d5/w98_2lh__core_2memlink_8h-source.html#l00026">MyDoubleXYZ::X</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00535">icXYZNumber::Y</a>, <a class="el" href="../../d4/d5/w98_2lh__core_2memlink_8h-source.html#l00026">MyDoubleXYZ::Y</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00536">icXYZNumber::Z</a>, and <a class="el" href="../../d4/d5/w98_2lh__core_2memlink_8h-source.html#l00026">MyDoubleXYZ::Z</a>.
<p>
<pre class="fragment"><div>00877 {
00878         <span class="keywordtype">double</span>  factorX,factorY,factorZ;
00879         <span class="keywordtype">double</span> inMat[3][3];
00880         
00881         <a class="code" href="../../d3/d6/w98_2lh__core_2memlink_8h.html#a5">MakeMyDoubleXYZ</a>( r, (<a class="code" href="../../d5/d1/structMyDoubleXYZ.html">MyDoubleXYZ</a>*)&amp;inMat[0][0] );
00882         <a class="code" href="../../d3/d6/w98_2lh__core_2memlink_8h.html#a5">MakeMyDoubleXYZ</a>( g, (<a class="code" href="../../d5/d1/structMyDoubleXYZ.html">MyDoubleXYZ</a>*)&amp;inMat[1][0] );
00883         <a class="code" href="../../d3/d6/w98_2lh__core_2memlink_8h.html#a5">MakeMyDoubleXYZ</a>( b, (<a class="code" href="../../d5/d1/structMyDoubleXYZ.html">MyDoubleXYZ</a>*)&amp;inMat[2][0] );
00884 
00885         factorX = inMat[0][0] + inMat[1][0] + inMat[2][0];
00886         factorY = inMat[0][1] + inMat[1][1] + inMat[2][1];
00887         factorZ = inMat[0][2] + inMat[1][2] + inMat[2][2];
00888 
00889         factorX = Illuminant-&gt;<a class="code" href="../../d5/d1/structMyDoubleXYZ.html#o0">X</a> / factorX * 65536;
00890         factorY = Illuminant-&gt;<a class="code" href="../../d5/d1/structMyDoubleXYZ.html#o1">Y</a> / factorY * 65536;
00891         factorZ = Illuminant-&gt;<a class="code" href="../../d5/d1/structMyDoubleXYZ.html#o2">Z</a> / factorZ * 65536;
00892 
00893         resR-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o0">X</a> = (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d1/lh__core_2dondim_8c.html#a4">Round</a>(inMat[0][0] * factorX);                   <span class="comment">/* red primary */</span>
00894         resR-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o1">Y</a> = (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d1/lh__core_2dondim_8c.html#a4">Round</a>(inMat[0][1] * factorY);
00895         resR-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o2">Z</a> = (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d1/lh__core_2dondim_8c.html#a4">Round</a>(inMat[0][2] * factorZ);
00896         resG-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o0">X</a> = (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d1/lh__core_2dondim_8c.html#a4">Round</a>(inMat[1][0] * factorX);                   <span class="comment">/* green primary */</span>
00897         resG-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o1">Y</a> = (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d1/lh__core_2dondim_8c.html#a4">Round</a>(inMat[1][1] * factorY);
00898         resG-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o2">Z</a> = (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d1/lh__core_2dondim_8c.html#a4">Round</a>(inMat[1][2] * factorZ);
00899         resB-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o0">X</a> = (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d1/lh__core_2dondim_8c.html#a4">Round</a>(inMat[2][0] * factorX);                   <span class="comment">/* blue primary */</span>
00900         resB-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o1">Y</a> = (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d1/lh__core_2dondim_8c.html#a4">Round</a>(inMat[2][1] * factorY);
00901         resB-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o2">Z</a> = (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d1/lh__core_2dondim_8c.html#a4">Round</a>(inMat[2][2] * factorZ);
00902 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="lh_core/memlink.c::NormalizeWithWhiteAdaption" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void NormalizeWithWhiteAdaption           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>r</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>g</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>b</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d5/d1/structMyDoubleXYZ.html">MyDoubleXYZ</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Illuminant</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>resR</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>resG</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="../../d8/d6/structicXYZNumber.html">MyXYZNumber</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>resB</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00905">905</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
References <a class="el" href="../../d0/d6/lh__core_2fragment_8c-source.html#l00389">doubMatrixInvert()</a>, <a class="el" href="../../d3/d8/ps2_8c-source.html#l06379">g()</a>, <a class="el" href="../../d1/d6/w98_2lh__core_2memlink_8c.html#a26">GetMatrixedVal()</a>, <a class="el" href="../../d3/d6/w98_2lh__core_2memlink_8h.html#a5">MakeMyDoubleXYZ()</a>, <a class="el" href="../../d1/d0/lh__core_2dondim_8c-source.html#l00053">Round</a>, <a class="el" href="../../d1/d6/w98_2lh__core_2memlink_8c.html#a25">TransposeMatrix()</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00534">icXYZNumber::X</a>, <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00535">icXYZNumber::Y</a>, and <a class="el" href="../../d6/d6/mscmm_8w98_2lh__core_2profile_8h-source.html#l00536">icXYZNumber::Z</a>.
<p>
<pre class="fragment"><div>00906 {
00907         <span class="keywordtype">double</span>  factorR,factorG,factorB;
00908         <span class="keywordtype">double</span> inMat[3][3];
00909         <span class="keywordtype">double</span> outMat[3][3];
00910 
00911         <a class="code" href="../../d3/d6/w98_2lh__core_2memlink_8h.html#a5">MakeMyDoubleXYZ</a>( r, (<a class="code" href="../../d5/d1/structMyDoubleXYZ.html">MyDoubleXYZ</a>*)&amp;inMat[0][0] );
00912         <a class="code" href="../../d3/d6/w98_2lh__core_2memlink_8h.html#a5">MakeMyDoubleXYZ</a>( g, (<a class="code" href="../../d5/d1/structMyDoubleXYZ.html">MyDoubleXYZ</a>*)&amp;inMat[1][0] );
00913         <a class="code" href="../../d3/d6/w98_2lh__core_2memlink_8h.html#a5">MakeMyDoubleXYZ</a>( b, (<a class="code" href="../../d5/d1/structMyDoubleXYZ.html">MyDoubleXYZ</a>*)&amp;inMat[2][0] );
00914 
00915         <span class="keywordflow">if</span>( !<a class="code" href="../../d1/d6/w98_2lh__core_2memlink_8c.html#a24">doubMatrixInvert</a>(inMat, outMat) )
00916         {
00917                 <span class="keywordflow">return</span> ;
00918         }
00919 
00920         <a class="code" href="../../d1/d6/w98_2lh__core_2memlink_8c.html#a25">TransposeMatrix</a>( outMat );
00921 
00922         factorR =  <a class="code" href="../../d1/d6/w98_2lh__core_2memlink_8c.html#a26">GetMatrixedVal</a>( outMat, 0, Illuminant )*65536;
00923         factorG =  <a class="code" href="../../d1/d6/w98_2lh__core_2memlink_8c.html#a26">GetMatrixedVal</a>( outMat, 1, Illuminant )*65536;
00924         factorB =  <a class="code" href="../../d1/d6/w98_2lh__core_2memlink_8c.html#a26">GetMatrixedVal</a>( outMat, 2, Illuminant )*65536;
00925 
00926         resR-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o0">X</a> = (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d1/lh__core_2dondim_8c.html#a4">Round</a>(inMat[0][0] * factorR);                   <span class="comment">/* red primary */</span>
00927         resR-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o1">Y</a> = (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d1/lh__core_2dondim_8c.html#a4">Round</a>(inMat[0][1] * factorR);
00928         resR-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o2">Z</a> = (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d1/lh__core_2dondim_8c.html#a4">Round</a>(inMat[0][2] * factorR);
00929         resG-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o0">X</a> = (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d1/lh__core_2dondim_8c.html#a4">Round</a>(inMat[1][0] * factorG);                   <span class="comment">/* green primary */</span>
00930         resG-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o1">Y</a> = (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d1/lh__core_2dondim_8c.html#a4">Round</a>(inMat[1][1] * factorG);
00931         resG-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o2">Z</a> = (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d1/lh__core_2dondim_8c.html#a4">Round</a>(inMat[1][2] * factorG);
00932         resB-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o0">X</a> = (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d1/lh__core_2dondim_8c.html#a4">Round</a>(inMat[2][0] * factorB);                   <span class="comment">/* blue primary */</span>
00933         resB-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o1">Y</a> = (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d1/lh__core_2dondim_8c.html#a4">Round</a>(inMat[2][1] * factorB);
00934         resB-&gt;<a class="code" href="../../d8/d6/structicXYZNumber.html#o2">Z</a> = (<span class="keywordtype">long</span>)<a class="code" href="../../d0/d1/lh__core_2dondim_8c.html#a4">Round</a>(inMat[2][2] * factorB);
00935 }
</div></pre>    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="lh_core/memlink.c::TransposeMatrix" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void TransposeMatrix           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">double&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>inpMat</em>[3][3]          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html#l00850">850</a> of file <a class="el" href="../../d1/d5/lh__core_2memlink_8c-source.html">lh_core/memlink.c</a>.
<p>
<pre class="fragment"><div>00851 {
00852         <span class="keywordtype">long</span> i,j;
00853         <span class="keywordtype">double</span> sav;
00854         <span class="keywordflow">for</span>( i=0; i&lt; 3; i++ ){
00855                 <span class="keywordflow">for</span>( j=i+1; j&lt; 3; j++ ){
00856                         sav                      =  inpMat[i][j];
00857                         inpMat[i][j] =  inpMat[j][i];
00858                         inpMat[j][i] =  sav;
00859                 }
00860         }
00861 
00862 }
</div></pre>    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat May 15 19:44:37 2004 for test by
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
